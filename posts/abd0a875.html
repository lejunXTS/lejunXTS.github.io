<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>QT——学习 | 比宇宙更加遥远的地方</title><meta name="author" content="一颗流浪小石头"><meta name="copyright" content="一颗流浪小石头"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="学习视频链接 完整项目链接： https:&#x2F;&#x2F;github.com&#x2F;lejunXTS&#x2F;QT.git https:&#x2F;&#x2F;github.com&#x2F;lejunXTS&#x2F;coinfilp&#x2F;tree&#x2F;main 此系列博客代码是我在学习过程中自己手敲实现一遍的，作为一个学习过程的记录。为了防止误解，我在此再次说明一下。如有侵权，请私信我。 概述什么是QTQT是一个跨平台的C++图像用户界面应用程序框架 为应用程序开">
<meta property="og:type" content="article">
<meta property="og:title" content="QT——学习">
<meta property="og:url" content="http://lejunxts.github.io/posts/abd0a875.html">
<meta property="og:site_name" content="比宇宙更加遥远的地方">
<meta property="og:description" content="学习视频链接 完整项目链接： https:&#x2F;&#x2F;github.com&#x2F;lejunXTS&#x2F;QT.git https:&#x2F;&#x2F;github.com&#x2F;lejunXTS&#x2F;coinfilp&#x2F;tree&#x2F;main 此系列博客代码是我在学习过程中自己手敲实现一遍的，作为一个学习过程的记录。为了防止误解，我在此再次说明一下。如有侵权，请私信我。 概述什么是QTQT是一个跨平台的C++图像用户界面应用程序框架 为应用程序开">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://lejunxts.github.io/img/fulilian2.jpg">
<meta property="article:published_time" content="2024-02-29T05:15:38.977Z">
<meta property="article:modified_time" content="2024-07-19T17:29:26.277Z">
<meta property="article:author" content="一颗流浪小石头">
<meta property="article:tag" content="基础">
<meta property="article:tag" content="QT">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://lejunxts.github.io/img/fulilian2.jpg"><link rel="shortcut icon" href="/img/meigui-0.jpg"><link rel="canonical" href="http://lejunxts.github.io/posts/abd0a875.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=4.12.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.32/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.0/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'QT——学习',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-07-20 01:29:26'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><link rel="stylesheet" href="/css/background.css"><link rel="stylesheet" href="APlayer.min.css"><div id="aplayer"></div><script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js" async></script><meta name="generator" content="Hexo 7.0.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/loading.gif" data-original="/img/touxiang.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">13</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">15</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">7</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-graduation-cap"></i><span> 博文</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 生活</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/photos/"><i class="fa-fw fa fa-camera-retro"></i><span> 相册</span></a></li><li><a class="site-page child" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/books/"><i class="fa-fw fa fa-book"></i><span> 书籍</span></a></li><li><a class="site-page child" href="/bangumis/"><i class="fa-fw fas fa-tv"></i><span> 动画</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于笔者</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/img/fulilian2.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="比宇宙更加遥远的地方"><span class="site-name">比宇宙更加遥远的地方</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-graduation-cap"></i><span> 博文</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 生活</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/photos/"><i class="fa-fw fa fa-camera-retro"></i><span> 相册</span></a></li><li><a class="site-page child" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/books/"><i class="fa-fw fa fa-book"></i><span> 书籍</span></a></li><li><a class="site-page child" href="/bangumis/"><i class="fa-fw fas fa-tv"></i><span> 动画</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于笔者</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">QT——学习</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-02-29T05:15:38.977Z" title="发表于 2024-02-29 13:15:38">2024-02-29</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-07-19T17:29:26.277Z" title="更新于 2024-07-20 01:29:26">2024-07-20</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/c/">c++</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">9.6k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>40分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="QT——学习"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1g4411H78N/?spm_id_from=333.337.search-card.all.click&vd_source=1c8b0af391894cdb44e3942161a1de4f">学习视频链接</a></p>
<p>完整项目链接：</p>
<p><a target="_blank" rel="noopener" href="https://github.com/lejunXTS/QT.git">https://github.com/lejunXTS/QT.git</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/lejunXTS/coinfilp/tree/main">https://github.com/lejunXTS/coinfilp/tree/main</a></p>
<p>此系列博客代码是我在学习过程中自己手敲实现一遍的，作为一个学习过程的记录。为了防止误解，我在此再次说明一下。如有侵权，请私信我。</p>
<h1 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h1><h2 id="什么是QT"><a href="#什么是QT" class="headerlink" title="什么是QT"></a>什么是QT</h2><p>QT是一个<strong>跨平台</strong>的C++<strong>图像用户界面应用程序框架</strong></p>
<p>为应用程序开发者提供建立艺术级图形界面所需的所有功能，它是完全面向对象的，很容易扩展，并且允许真正的组件编程</p>
<h2 id="Qt的发展史"><a href="#Qt的发展史" class="headerlink" title="Qt的发展史"></a>Qt的发展史</h2><p>1991年 Qt最早由奇趣科技开发</p>
<p>1996年 进入商业领域，它也是目前流行的Linux桌面环境KDE的基础</p>
<p>2008年 奇趣科技被诺基亚公司收购，Qt称为诺基亚旗下的编程语言</p>
<p>2012年 Qt又被Digia公司收购</p>
<p>2014年4月 跨平台的集成开发环境Qt Creator3.1.0发布，同年5月20日配发了Qt5.3正式版，至此Qt实现了对iOS、Android、WP等各平台的全面支持</p>
<p><strong>当前Qt最新版本为 Qt 6</strong></p>
<h2 id="支持的平台"><a href="#支持的平台" class="headerlink" title="支持的平台"></a>支持的平台</h2><p>Windows – XP、Vista、Win7、Win8、Win2008、Win10、Win11</p>
<p>Uinux&#x2F;X11 – Linux、Sun Solaris、HP-UX、Compaq Tru64 UNIX、IBM AIX、SGI IRIX、FreeBSD、BSD&#x2F;OS、和其他很多X11平台</p>
<p>Macintosh – Mac OS X</p>
<p>Embedded – 有帧缓冲支持的嵌入式Linux平台，Windows CE</p>
<h2 id="Qt版本"><a href="#Qt版本" class="headerlink" title="Qt版本"></a>Qt版本</h2><p>Qt按照不同的版本发行，分为商业版和开源版</p>
<p>商业版:</p>
<p>为商业软件提供开发，他们提供传统商业软件发行版，并且提供在商业有效期内的免费升级和技术支持服务。</p>
<p>开源的LGPL版本:</p>
<p>为了开发自有而设计的开放源码软件，它提供了和商业版本同样的功能，在GNU通用公共许可下，它是免费的。</p>
<h2 id="QT的优点"><a href="#QT的优点" class="headerlink" title="QT的优点"></a>QT的优点</h2><p>跨平台，几乎支持所有的平台</p>
<p>接口简单，容易上手</p>
<p>一定程度上简化了内存回收机制 </p>
<p>开发效率高，能够快速的构建应用程序</p>
<p>有很好的社区氛围</p>
<p>可以进行嵌入式开发</p>
<h2 id="成功案例"><a href="#成功案例" class="headerlink" title="成功案例"></a>成功案例</h2><p>Linux桌面环境KDE</p>
<p>WPS Office 办公软件</p>
<p>Skype 网络电话</p>
<p>Google Earth 谷歌地图</p>
<p>VLC多媒体播放器</p>
<p>VirtualBox虚拟机软件</p>
<h2 id="创建项目"><a href="#创建项目" class="headerlink" title="创建项目"></a>创建项目</h2><p>Qt中的构建⼯具有三种：<strong>qmake CMake Qbs</strong></p>
<p>qmake：qmake是⼀个构建⼯具（build tool），⽤于⾃动⽣成makefile⽂件。qmake⽀持跨平台构建。qmake编辑的是⼀个后缀名为.pro的⽂件。</p>
<p>CMake：CMake是⼀个跨平台的构建⼯具。CMake本⾝不是⼀个编译器，其实就是⽣成⼀个让编译器能读懂编译流程的⽂件⼯具。让CMake⾃动⽣成构建系统，例如Makefile和Visual Studio项⽬⽂件。CMake是⼀个第三⽅⼯具，有⾃⼰的⽂档。</p>
<p>Qbs：Qbs（Qt Build Suite：Qt构建套件）同qmake、CMake⼀样都是构建⼯具。Qbs号称是新⼀代的构建⼯具，⽐qmake编译速度更快。Qbs没有绑定Qt版本，它从项⽬⽂件的⾼级项⽬描述中⽣成⼀个正确的依赖表。⽽传统的MakeFile⽣成⼯具如qmake和CMake，其在⽣成MakeFile⽂件后将实际的命令交给Make⼯具去执⾏。</p>
<p><strong>基类选择</strong></p>
<p>QWidget（父类）——最简单、最基本的窗体程序，里面可以放置多个控件实现程序功能</p>
<p>QMainWindow（子类）——主窗口类，一般用于较为复杂的应用程序，除了中央客户区界面，还包括菜单栏、工具栏、状态栏以及多个可停靠的工具对话框等</p>
<p>QDialog（子类）——基于对话框的程序，对话框一般用于弹窗，也可以用于主界面显示，对话框是从QWidget继承而来，并丰富了一些功能，如模态显示和返回值等</p>
<p><strong>版本控制系统：</strong></p>
<p>svn  vss  git</p>
<h1 id="创建QT项目"><a href="#创建QT项目" class="headerlink" title="创建QT项目"></a>创建QT项目</h1><h2 id="第一个QT项目"><a href="#第一个QT项目" class="headerlink" title="第一个QT项目"></a>第一个QT项目</h2><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;mywidget.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QApplication&gt;</span>  <span class="comment">//包含一个应用程序类的头文件</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//main程序入口  argc 命令行变量的数量  argv 命令行变量的数组</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//a应用程序对象，在qt中，应用程序对象有且仅有一个</span></span><br><span class="line">    <span class="function">QApplication <span class="title">a</span><span class="params">(argc, argv)</span></span>;</span><br><span class="line">    <span class="comment">//窗口对象  myWidget的父类——&gt;QWidget</span></span><br><span class="line">    myWidget w;</span><br><span class="line">    <span class="comment">//调用show方法  窗口对象默认不会显示，必须要调用show方法显示窗口</span></span><br><span class="line">    w.<span class="built_in">show</span>();</span><br><span class="line">    <span class="comment">//让应用程序对象进入消息循环</span></span><br><span class="line">    <span class="comment">//让代码阻塞到这行</span></span><br><span class="line">    <span class="keyword">return</span> a.<span class="built_in">exec</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/img/loading.gif" data-original="/posts/abd0a875/1.png"></p>
<p>Qt系统提供的标准类名声明头文件没有.h后缀</p>
<p>Qt一个类对应一个头文件，类名就是头文件名</p>
<p>QApplication应用程序类：</p>
<p>管理图形用户界面应用程序的控制流和主要设置。</p>
<p>是Qt的整个后台管理的命脉它包含主事件循环，在其中来自窗口系统和其它资源的所有事件处理和调度。它也处理应用程序的初始化和结束，并且提供对话管理。</p>
<p>对于任何一个使用Qt的图形用户界面应用程序，都正好存在一个QApplication对象，而不论这个应用程序在同一时间内是不是有0、1、2或更多个窗口。</p>
<p>a.exec()<br>程序进入消息循环，等待对用户输入进行响应。这里main()把控制权转交给Qt，Qt完成事件处理工作，当应用程序退出的时候exec()的值就会返回。在exec()中，Qt接受并处理用户和系统的事件并且把它们传递给适当的窗口部件。</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> MYWIDGET_H <span class="comment">//防止头文件重复包含</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MYWIDGET_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QWidget&gt;</span><span class="comment">//包含QWidget 窗口类</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">myWidget</span> : <span class="keyword">public</span> QWidget</span><br><span class="line">&#123;</span><br><span class="line">    Q_OBJECT <span class="comment">//Q_OBJECT宏，允许类中使用信号和槽的机制</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">myWidget</span>(QWidget *parent = <span class="literal">nullptr</span>);<span class="comment">//构造函数</span></span><br><span class="line">    ~<span class="built_in">myWidget</span>();<span class="comment">//析构函数</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">// MYWIDGET_H</span></span></span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;mywidget.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//命名规范</span></span><br><span class="line"><span class="comment">//类名：首字母大写，单词和单词之间首字母大写（大驼峰）</span></span><br><span class="line"><span class="comment">//函数名 变量名称，首字母小写，单词和单词之间字母大写（小驼峰）</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//快捷键</span></span><br><span class="line"><span class="comment">//注释  ctrl+/</span></span><br><span class="line"><span class="comment">//运行  ctrl+r</span></span><br><span class="line"><span class="comment">//编译  ctrl+b</span></span><br><span class="line"><span class="comment">//字体缩放 Ctrl+鼠标滚轮</span></span><br><span class="line"><span class="comment">//查找 Ctrl+f</span></span><br><span class="line"><span class="comment">//整行移动  Ctrl+shift+上或者下</span></span><br><span class="line"><span class="comment">//帮助文档 F1</span></span><br><span class="line"><span class="comment">//自动对齐  Ctrl+i</span></span><br><span class="line"><span class="comment">//同名之间的.h和.cpp切换  F4   </span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">myWidget::<span class="built_in">myWidget</span>(QWidget *parent)</span><br><span class="line">    : <span class="built_in">QWidget</span>(parent)<span class="comment">//初始化列表</span></span><br><span class="line">&#123;&#125;</span><br><span class="line"></span><br><span class="line">myWidget::~<span class="built_in">myWidget</span>() &#123;&#125;</span><br></pre></td></tr></table></figure>


<p><strong>.pro 文件介绍</strong></p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//QT包含的模块</span></span><br><span class="line">QT       += core gui</span><br><span class="line"><span class="comment">//大于4版本以上 包含widget模块</span></span><br><span class="line"><span class="built_in">greaterThan</span>(QT_MAJOR_VERSION, <span class="number">4</span>): QT += widgets</span><br><span class="line"><span class="comment">//这一行指定了C++标准为C++17，用于告诉编译器使用C++17标准编译代码</span></span><br><span class="line">CONFIG += c++<span class="number">17</span></span><br><span class="line"></span><br><span class="line"># You can make your code fail to compile <span class="keyword">if</span> it uses deprecated APIs.</span><br><span class="line"># In order to <span class="keyword">do</span> so, uncomment the following line.</span><br><span class="line">#DEFINES += QT_DISABLE_DEPRECATED_BEFORE=<span class="number">0x060000</span>    <span class="meta"># disables all the APIs deprecated before Qt 6.0.0</span></span><br><span class="line"><span class="comment">//源文件</span></span><br><span class="line">SOURCES += \</span><br><span class="line">    main.cpp \</span><br><span class="line">    mywidget.cpp</span><br><span class="line"><span class="comment">//头文件</span></span><br><span class="line">HEADERS += \</span><br><span class="line">    mywidget.h</span><br><span class="line"><span class="comment">//项目的部署规则，根据目标平台将可执行文件安装到不同的目录。</span></span><br><span class="line"># Default rules <span class="keyword">for</span> deployment.</span><br><span class="line">qnx: target.path = /tmp/$$&#123;TARGET&#125;/bin</span><br><span class="line"><span class="keyword">else</span>: unix:!android: target.path = /opt/$$&#123;TARGET&#125;/bin</span><br><span class="line">!<span class="built_in">isEmpty</span>(target.path): INSTALLS += target</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h2 id="按钮控件的常用API"><a href="#按钮控件的常用API" class="headerlink" title="按钮控件的常用API"></a>按钮控件的常用API</h2><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">myWidget::<span class="built_in">myWidget</span>(QWidget *parent)</span><br><span class="line">    : <span class="built_in">QWidget</span>(parent)<span class="comment">//初始化列表</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//创建一个按钮</span></span><br><span class="line">    QPushButton * btn = <span class="keyword">new</span> QPushButton;</span><br><span class="line">    <span class="comment">//btn-&gt;show();//show以顶层方式单出窗口控件</span></span><br><span class="line">    <span class="comment">//让btn对象依赖在myWidget窗口中</span></span><br><span class="line">    btn-&gt;<span class="built_in">setParent</span>(<span class="keyword">this</span>);</span><br><span class="line">    <span class="comment">//显示文本</span></span><br><span class="line">    btn-&gt;<span class="built_in">setText</span>(<span class="string">&quot;the first button&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//创建第二个按钮  按照控件的大小创建窗口</span></span><br><span class="line">    QPushButton * btn2 = <span class="keyword">new</span> <span class="built_in">QPushButton</span>(<span class="string">&quot;the second button&quot;</span>,<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//移动btn2按钮</span></span><br><span class="line">    btn2-&gt;<span class="built_in">move</span>(<span class="number">100</span>,<span class="number">100</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// //重置按钮大小</span></span><br><span class="line">    <span class="comment">// btn2-&gt;resize(60,60);</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//重置窗口大小</span></span><br><span class="line">    <span class="built_in">resize</span>(<span class="number">500</span>,<span class="number">300</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//设置固定窗口大小</span></span><br><span class="line">    <span class="built_in">setFixedSize</span>(<span class="number">500</span>,<span class="number">300</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//设置窗口标题</span></span><br><span class="line">    <span class="built_in">setWindowTitle</span>(<span class="string">&quot;the first window&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/img/loading.gif" data-original="/posts/abd0a875/2.png"></p>
<h2 id="对象树"><a href="#对象树" class="headerlink" title="对象树"></a>对象树</h2><p>当创建的对象在堆区的时候，如果指定的父类是QObject派生下来的类或者QObject子类派生下来的类，可以不用管理释放的操作，对象会放入到对象树中。</p>
<p>一定的程度上简化了内存回收机制</p>
<h2 id="窗口坐标体系"><a href="#窗口坐标体系" class="headerlink" title="窗口坐标体系"></a>窗口坐标体系</h2><p>坐标体系：</p>
<p>以左上角为原点（0,0），X向右增加，Y向下增加</p>
<p>对于嵌套窗口，其坐标是相对于父窗口来说的</p>
<h1 id="信号和槽机制"><a href="#信号和槽机制" class="headerlink" title="信号和槽机制"></a>信号和槽机制</h1><h2 id="连接方式"><a href="#连接方式" class="headerlink" title="连接方式"></a>连接方式</h2><p>connect（信号的发送者，发送的具体信号，信号的接受者，信号的处理（槽函数））</p>
<p>信号槽的优点：松散耦合，信号发送端和接收端本身是没有关联的，通过connect连接将两端耦合在一起</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//创建一个自己的按钮对象</span></span><br><span class="line">MyPushButton * myBtn = <span class="keyword">new</span> MyPushButton;</span><br><span class="line">myBtn-&gt;<span class="built_in">setText</span>(<span class="string">&quot;my own button&quot;</span>);</span><br><span class="line"></span><br><span class="line">myBtn-&gt;<span class="built_in">move</span>(<span class="number">100</span>,<span class="number">200</span>);</span><br><span class="line">myBtn-&gt;<span class="built_in">setParent</span>(<span class="keyword">this</span>);<span class="comment">//设置到对象树中</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//需求——点击我的按钮，关闭窗口</span></span><br><span class="line"><span class="comment">//参数1 信号的发送者 参数二 发送的信号(函数的地址)</span></span><br><span class="line"><span class="comment">//参数3 信号的接受者 参数4 处理的槽函数(函数的地址)</span></span><br><span class="line"><span class="comment">//connect(myBtn, &amp;MyPushButton::clicked, this, &amp;myWidget::close);</span></span><br><span class="line"><span class="built_in">connect</span>(myBtn, &amp;QPushButton::clicked, <span class="keyword">this</span>, &amp;QWidget::close);</span><br></pre></td></tr></table></figure>

<h2 id="自定义信号和槽"><a href="#自定义信号和槽" class="headerlink" title="自定义信号和槽"></a>自定义信号和槽</h2><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> TEACHER_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> TEACHER_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QObject&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Teacher</span> : <span class="keyword">public</span> QObject</span><br><span class="line">&#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">explicit</span> <span class="title">Teacher</span><span class="params">(QObject *parent = <span class="literal">nullptr</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">signals:</span><br><span class="line">    <span class="comment">//自定义信号  写到signals下</span></span><br><span class="line">    <span class="comment">//返回值是void  只需要声明  不需要实现</span></span><br><span class="line">    <span class="comment">//可以有参数  可以重载</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">hungry</span><span class="params">()</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">// TEACHER_H</span></span></span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;teacher.h&quot;</span></span></span><br><span class="line"></span><br><span class="line">Teacher::<span class="built_in">Teacher</span>(QObject *parent)</span><br><span class="line">    : QObject&#123;parent&#125;</span><br><span class="line">&#123;&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> STUDENT_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> STUDENT_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QObject&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> : <span class="keyword">public</span> QObject</span><br><span class="line">&#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">explicit</span> <span class="title">Student</span><span class="params">(QObject *parent = <span class="literal">nullptr</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//早起版本槽函数写在public slots下，5.4版本后写在public或者全局下</span></span><br><span class="line">    <span class="comment">//返回值void 需要声明 需要实现</span></span><br><span class="line">    <span class="comment">//可以有参数 可以重载</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">treat</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">signals:</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">// STUDENT_H</span></span></span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;student.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QDebug&gt;</span></span></span><br><span class="line"></span><br><span class="line">Student::<span class="built_in">Student</span>(QObject *parent)</span><br><span class="line">    : QObject&#123;parent&#125;</span><br><span class="line">&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Student::treat</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">qDebug</span>() &lt;&lt; <span class="string">&quot;please eat teacher&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> WIDGET_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> WIDGET_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;teacher.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;student.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QWidget&gt;</span></span></span><br><span class="line"></span><br><span class="line">QT_BEGIN_NAMESPACE</span><br><span class="line"><span class="keyword">namespace</span> Ui &#123;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Widget</span>;</span><br><span class="line">&#125;</span><br><span class="line">QT_END_NAMESPACE</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Widget</span> : <span class="keyword">public</span> QWidget</span><br><span class="line">&#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Widget</span>(QWidget *parent = <span class="literal">nullptr</span>);</span><br><span class="line">    ~<span class="built_in">Widget</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    Ui::Widget *ui;</span><br><span class="line"></span><br><span class="line">    Teacher * cc;</span><br><span class="line">    Student * ll;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">classIsOver</span><span class="params">()</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">// WIDGET_H</span></span></span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;widget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;./ui_widget.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//Teacher 类 老师类</span></span><br><span class="line"><span class="comment">//Student 类 学生类</span></span><br><span class="line"><span class="comment">//下课后，老师会触发一个信号，饿了，学生相应信号，请客吃饭</span></span><br><span class="line"></span><br><span class="line">Widget::<span class="built_in">Widget</span>(QWidget *parent)</span><br><span class="line">    : <span class="built_in">QWidget</span>(parent)</span><br><span class="line">    , <span class="built_in">ui</span>(<span class="keyword">new</span> Ui::Widget)</span><br><span class="line">&#123;</span><br><span class="line">    ui-&gt;<span class="built_in">setupUi</span>(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//创建老师对象</span></span><br><span class="line">    <span class="keyword">this</span>-&gt;cc = <span class="keyword">new</span> <span class="built_in">Teacher</span>(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//创建学生对象</span></span><br><span class="line">    <span class="keyword">this</span>-&gt;ll = <span class="keyword">new</span> <span class="built_in">Student</span>(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//老师饿了 学生请老师吃饭</span></span><br><span class="line">    <span class="built_in">connect</span>(cc, &amp;Teacher::hungry, ll, &amp;Student::treat);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//调用下课函数</span></span><br><span class="line">    <span class="built_in">classIsOver</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Widget::classIsOver</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//下课函数 调用后 触发老师饿了的信号</span></span><br><span class="line">    emit cc-&gt;<span class="built_in">hungry</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Widget::~<span class="built_in">Widget</span>()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">delete</span> ui;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;widget.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QApplication&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="function">QApplication <span class="title">a</span><span class="params">(argc, argv)</span></span>;</span><br><span class="line">    Widget w;</span><br><span class="line">    w.<span class="built_in">show</span>();</span><br><span class="line">    <span class="keyword">return</span> a.<span class="built_in">exec</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>重载</strong></p>
<p>当自定义信号和槽出现重载，需要利用函数指针明确指向函数的地址</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">hungry</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">hungry</span><span class="params">(QString foodName)</span></span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">treat</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">treat</span><span class="params">(QString foodName)</span></span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">emit cc-&gt;<span class="built_in">hungry</span>(<span class="string">&quot;sandwich&quot;</span>);</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//连接带参数的信号和槽</span></span><br><span class="line"><span class="comment">//指针-&gt;地址</span></span><br><span class="line"><span class="comment">//函数指针-&gt;函数地址</span></span><br><span class="line"><span class="built_in">void</span>(Teacher:: *teacherSignal)(QString) = &amp;Teacher::hungry;</span><br><span class="line"><span class="built_in">void</span>(Student:: *studentSlot)(QString) = &amp;Student::treat;</span><br><span class="line"><span class="built_in">connect</span>(cc, teacherSignal, ll, studentSlot);</span><br><span class="line"></span><br><span class="line"><span class="built_in">classIsOver</span>();</span><br></pre></td></tr></table></figure>

<p><strong>点击一个下课的按钮再触发下课 &amp; 信号连接信号</strong></p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">Widget::<span class="built_in">Widget</span>(QWidget *parent)</span><br><span class="line">    : <span class="built_in">QWidget</span>(parent)</span><br><span class="line">    , <span class="built_in">ui</span>(<span class="keyword">new</span> Ui::Widget)</span><br><span class="line">&#123;</span><br><span class="line">    ui-&gt;<span class="built_in">setupUi</span>(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//创建老师对象</span></span><br><span class="line">    <span class="keyword">this</span>-&gt;cc = <span class="keyword">new</span> <span class="built_in">Teacher</span>(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//创建学生对象</span></span><br><span class="line">    <span class="keyword">this</span>-&gt;ll = <span class="keyword">new</span> <span class="built_in">Student</span>(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// //老师饿了 学生请老师吃饭</span></span><br><span class="line">    <span class="comment">// connect(cc, &amp;Teacher::hungry, ll, &amp;Student::treat);</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// //调用下课函数</span></span><br><span class="line">    <span class="comment">// classIsOver();</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//连接带参数的信号和槽</span></span><br><span class="line">    <span class="comment">//指针-&gt;地址</span></span><br><span class="line">    <span class="comment">//函数指针-&gt;函数地址</span></span><br><span class="line">    <span class="built_in">void</span>(Teacher:: *teacherSignal)(QString) = &amp;Teacher::hungry;</span><br><span class="line">    <span class="built_in">void</span>(Student:: *studentSlot)(QString) = &amp;Student::treat;</span><br><span class="line">    <span class="built_in">connect</span>(cc, teacherSignal, ll, studentSlot);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//classIsOver();</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//点击一个下课的按钮再触发下课</span></span><br><span class="line">    QPushButton * btn = <span class="keyword">new</span> <span class="built_in">QPushButton</span>(<span class="string">&quot;class over&quot;</span>, <span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//重置窗口大小</span></span><br><span class="line">    <span class="built_in">resize</span>(<span class="number">600</span>,<span class="number">400</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//点击按钮出发下课</span></span><br><span class="line">    <span class="comment">//connect(btn, &amp;QPushButton::clicked, this, &amp;Widget::classIsOver);</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//无参信号和槽连接</span></span><br><span class="line">    <span class="built_in">void</span>(Teacher:: *teacherSignal2)(<span class="type">void</span>) = &amp;Teacher::hungry;</span><br><span class="line">    <span class="built_in">void</span>(Student:: *studentSlot2)(<span class="type">void</span>) = &amp;Student::treat;</span><br><span class="line">    <span class="built_in">connect</span>(cc, teacherSignal2, ll, studentSlot2);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//信号连接信号</span></span><br><span class="line">    <span class="built_in">connect</span>(btn, &amp;QPushButton::clicked, cc, teacherSignal2);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//断开信号</span></span><br><span class="line">    <span class="comment">//disconnect(cc, teacherSignal2, ll, studentSlot2)</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><p><strong>QString-&gt;char *  先转成QByteArray (.toUtf8())  再转成char * ()</strong></p>
<ul>
<li><p>一个信号可以连接多个槽函数</p>
</li>
<li><p>多个信号可以连接同一个槽函数</p>
</li>
<li><p>信号和槽函数的参数必须类型一一对应</p>
</li>
<li><p>信号和槽的参数个数不需要一致，信号的参数个数可以多于槽函数的参数个数</p>
</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//QT4版本以前的信号和槽连接方式</span></span><br><span class="line"><span class="comment">//利用QT4信号槽连接无参版本</span></span><br><span class="line"><span class="comment">//QT4版本底层SIGNAL(&quot;hungry&quot;)  SLOT(&quot;treat&quot;)</span></span><br><span class="line"><span class="built_in">connect</span>(cc, <span class="built_in">SIGNAL</span>(<span class="built_in">hungry</span>()), ll, <span class="built_in">SLOT</span>(<span class="built_in">treat</span>()));</span><br><span class="line"><span class="comment">//QT4版本优点：参数直观   缺点：类型不做检测</span></span><br><span class="line"><span class="comment">//QT5以上版本支持QT4版本写法，反之不支持</span></span><br></pre></td></tr></table></figure>

<h2 id="Lambda表达式"><a href="#Lambda表达式" class="headerlink" title="Lambda表达式"></a>Lambda表达式</h2><p>[]标识符 匿名函数</p>
<p>&#x3D; 值传递</p>
<p>&amp; 引用传递</p>
<p>() 参数  {}实现体</p>
<p>mutable 修饰值传递变量，可以修改拷贝出的数据，改变不了本体</p>
<p>返回值 <a href=""></a>-&gt;int{}</p>
<p>最常用  <a href="">&#x3D;</a>{}</p>
<p>C++11中的Lambda表达式(这个再找资料看一下)</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//利用lambda表达式实现点击按钮关闭窗口</span></span><br><span class="line">QPushButton * btn2 = <span class="keyword">new</span> QPushButton;</span><br><span class="line">btn2-&gt;<span class="built_in">setText</span>(<span class="string">&quot;close&quot;</span>);</span><br><span class="line">btn2-&gt;<span class="built_in">move</span>(<span class="number">100</span>,<span class="number">0</span>);</span><br><span class="line">btn2-&gt;<span class="built_in">setParent</span>(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">connect</span>(btn2, &amp;QPushButton::clicked, <span class="keyword">this</span>, [=]()&#123;</span><br><span class="line">    <span class="keyword">this</span>-&gt;<span class="built_in">close</span>();</span><br><span class="line">    emit cc-&gt;<span class="built_in">hungry</span>(<span class="string">&quot;sandwich&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//btn2-&gt;setText(&quot;aaa&quot;);</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>


<h1 id="QMainWindow"><a href="#QMainWindow" class="headerlink" title="QMainWindow"></a>QMainWindow</h1><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>QMainWindow是一个为用户提供主窗口程序的类，包含一个菜单栏（menu bar）、多个工具栏(tool bars)、多个锚接部件(dock widgets)(浮动窗口)、一个状态栏(status bar)及一个中心部件(central widget)，是许多应用程序的基础，如文本编辑器，图片编辑器等。</p>
<p><img src="/img/loading.gif" data-original="/posts/abd0a875/3.png"></p>
<h2 id="基础-常用操作"><a href="#基础-常用操作" class="headerlink" title="基础&amp;常用操作"></a>基础&amp;常用操作</h2><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;mainwindow.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QMenuBar&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QToolBar&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QDebug&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QPushButton&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QStatusBar&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QLabel&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QDockWidget&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QTextEdit&gt;</span></span></span><br><span class="line"></span><br><span class="line">MainWindow::<span class="built_in">MainWindow</span>(QWidget *parent)</span><br><span class="line">    : <span class="built_in">QMainWindow</span>(parent)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//重置窗口大小</span></span><br><span class="line">    <span class="built_in">resize</span>(<span class="number">600</span>,<span class="number">400</span>);</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    <span class="comment">//菜单栏--------------------------------------------------------</span></span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    <span class="comment">//菜单栏 最多只能有一个</span></span><br><span class="line">    <span class="comment">//菜单栏创建</span></span><br><span class="line">    QMenuBar * bar = <span class="built_in">menuBar</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//将菜单栏放入到 窗口中</span></span><br><span class="line">    <span class="built_in">setMenuBar</span>(bar);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//创建菜单</span></span><br><span class="line">    QMenu * fileMenu = bar-&gt;<span class="built_in">addMenu</span>(<span class="string">&quot;文件&quot;</span>);</span><br><span class="line">    QMenu * editMenu = bar-&gt;<span class="built_in">addMenu</span>(<span class="string">&quot;编辑&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//创建菜单项</span></span><br><span class="line">    QAction * newAction = fileMenu-&gt;<span class="built_in">addAction</span>(<span class="string">&quot;新建&quot;</span>);</span><br><span class="line">    <span class="comment">//添加分隔符</span></span><br><span class="line">    fileMenu-&gt;<span class="built_in">addSeparator</span>();</span><br><span class="line">    QAction * openAction = fileMenu-&gt;<span class="built_in">addAction</span>(<span class="string">&quot;打开&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//工具栏--------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//工具栏   可以有多个</span></span><br><span class="line">    QToolBar * toolBar = <span class="keyword">new</span> <span class="built_in">QToolBar</span>(<span class="keyword">this</span>);</span><br><span class="line">    <span class="built_in">addToolBar</span>(Qt::LeftToolBarArea, toolBar);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//后期设置只允许左右停靠</span></span><br><span class="line">    toolBar-&gt;<span class="built_in">setAllowedAreas</span>(Qt::LeftToolBarArea | Qt::RightToolBarArea);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//设置浮动</span></span><br><span class="line">    <span class="comment">//toolBar-&gt;setFloatable(false);</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//设置移动（总开关）</span></span><br><span class="line">    <span class="comment">//toolBar-&gt;setMovable(false);</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//在工具栏中设置内容</span></span><br><span class="line">    toolBar-&gt;<span class="built_in">addAction</span>(newAction);</span><br><span class="line">    <span class="comment">//添加分割线</span></span><br><span class="line">    toolBar-&gt;<span class="built_in">addSeparator</span>();</span><br><span class="line">    toolBar-&gt;<span class="built_in">addAction</span>(openAction);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//工具栏中添加控件</span></span><br><span class="line">    QPushButton * btn = <span class="keyword">new</span> <span class="built_in">QPushButton</span>(<span class="string">&quot;aa&quot;</span>, <span class="keyword">this</span>);</span><br><span class="line">    toolBar-&gt;<span class="built_in">addWidget</span>(btn);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//状态栏--------------------------------------------------------</span></span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    <span class="comment">//状态栏    最多有一个</span></span><br><span class="line">    QStatusBar * stBar = <span class="built_in">statusBar</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//设置到窗口中</span></span><br><span class="line">    <span class="built_in">setStatusBar</span>(stBar);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//放标签控件</span></span><br><span class="line">    QLabel * label = <span class="keyword">new</span> <span class="built_in">QLabel</span>(<span class="string">&quot;提示信息&quot;</span>, <span class="keyword">this</span>);</span><br><span class="line">    stBar-&gt;<span class="built_in">addWidget</span>(label);</span><br><span class="line"></span><br><span class="line">    QLabel * label2 = <span class="keyword">new</span> <span class="built_in">QLabel</span>(<span class="string">&quot;右侧提示信息&quot;</span>, <span class="keyword">this</span>);</span><br><span class="line">    stBar-&gt;<span class="built_in">addPermanentWidget</span>(label2);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//锚接部件--------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//锚接部件 （浮动窗口）  可以有多个</span></span><br><span class="line">    QDockWidget * dockWidget = <span class="keyword">new</span> <span class="built_in">QDockWidget</span>(<span class="string">&quot;浮动&quot;</span>, <span class="keyword">this</span>);</span><br><span class="line">    <span class="built_in">addDockWidget</span>(Qt::BottomDockWidgetArea, dockWidget);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//设置后期停靠区域，只允许上下</span></span><br><span class="line">    dockWidget-&gt;<span class="built_in">setAllowedAreas</span>(Qt::TopDockWidgetArea | Qt::BottomDockWidgetArea);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//中心部件--------------------------------------------------------</span></span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    <span class="comment">//设置中心部件(核心部件)   只能有一个</span></span><br><span class="line">    QTextEdit * edit = <span class="keyword">new</span> <span class="built_in">QTextEdit</span>(<span class="keyword">this</span>);</span><br><span class="line">    <span class="built_in">setCentralWidget</span>(edit);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">MainWindow::~<span class="built_in">MainWindow</span>() &#123;&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/img/loading.gif" data-original="/posts/abd0a875/4.png"></p>
<h2 id="资源文件"><a href="#资源文件" class="headerlink" title="资源文件"></a>资源文件</h2><ol>
<li><p>将图片文件拷贝到项目文件下</p>
</li>
<li><p>创建新文件-&gt;QT-&gt;QT resource file-&gt;给资源文件起名</p>
</li>
<li><p>res生成res.qrc</p>
</li>
<li><p>open in editor 编辑资源</p>
</li>
<li><p>添加前缀 添加文件</p>
</li>
<li><p>使用”: + 前缀名 + 文件名”</p>
</li>
</ol>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;mainwindow.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;./ui_mainwindow.h&quot;</span></span></span><br><span class="line"></span><br><span class="line">MainWindow::<span class="built_in">MainWindow</span>(QWidget *parent)</span><br><span class="line">    : <span class="built_in">QMainWindow</span>(parent)</span><br><span class="line">    , <span class="built_in">ui</span>(<span class="keyword">new</span> Ui::MainWindow)</span><br><span class="line">&#123;</span><br><span class="line">    ui-&gt;<span class="built_in">setupUi</span>(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ui-&gt;actionnew-&gt;setIcon(QIcon(&quot;D:/喜欢/罗小黑&amp;其他/001VEnKKgy1gsu6mbym6vj60t41dan4j02.jpg&quot;));</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//使用添加QT资源    &quot;: + 前缀名 + 文件名&quot;</span></span><br><span class="line">    ui-&gt;actionnew-&gt;<span class="built_in">setIcon</span>(<span class="built_in">QIcon</span>(<span class="string">&quot;:/image/001VEnKKgy1gsu6mbym6vj60t41dan4j02.jpg&quot;</span>));</span><br><span class="line">    ui-&gt;actionopen-&gt;<span class="built_in">setIcon</span>(<span class="built_in">QIcon</span>(<span class="string">&quot;:/image/005y0Ylbly1hhdrfsc6pbj32p51pinpe.jpg&quot;</span>));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/img/loading.gif" data-original="/posts/abd0a875/5.png"></p>
<h1 id="对话框QDialog"><a href="#对话框QDialog" class="headerlink" title="对话框QDialog"></a>对话框QDialog</h1><h2 id="自定义对话框"><a href="#自定义对话框" class="headerlink" title="自定义对话框"></a>自定义对话框</h2><p>模态与非模态对话框的创建</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;mainwindow.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;./ui_mainwindow.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QDialog&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QDebug&gt;</span></span></span><br><span class="line"></span><br><span class="line">MainWindow::<span class="built_in">MainWindow</span>(QWidget *parent)</span><br><span class="line">    : <span class="built_in">QMainWindow</span>(parent)</span><br><span class="line">    , <span class="built_in">ui</span>(<span class="keyword">new</span> Ui::MainWindow)</span><br><span class="line">&#123;</span><br><span class="line">    ui-&gt;<span class="built_in">setupUi</span>(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//点击新建按钮，弹出一个对话框</span></span><br><span class="line">    <span class="built_in">connect</span>(ui-&gt;actionnew,&amp;QAction::triggered, [=]()&#123;</span><br><span class="line">        <span class="comment">//对话框 分类</span></span><br><span class="line">        <span class="comment">//模态对话框（不可以对其他窗口进行操作）  非模态对话框（可以对其他窗口进行操作）</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// //模态创建  阻塞</span></span><br><span class="line">        <span class="comment">// QDialog dlg(this);</span></span><br><span class="line">        <span class="comment">// dlg.resize(300,200);</span></span><br><span class="line">        <span class="comment">// dlg.exec();</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// exec()：是 QDialog 类的成员函数，用于以模态（Modal）的方式显示对话框。</span></span><br><span class="line">        <span class="comment">// 模态对话框会阻塞程序的执行，直到用户关闭对话框并返回结果。</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// qDebug() &lt;&lt; &quot;模态对话框弹出了&quot;;</span></span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        <span class="comment">//非模态对话框</span></span><br><span class="line">        QDialog * dlg2 = <span class="keyword">new</span> <span class="built_in">QDialog</span>(<span class="keyword">this</span>);</span><br><span class="line">        dlg2-&gt;<span class="built_in">resize</span>(<span class="number">300</span>,<span class="number">200</span>);</span><br><span class="line">        dlg2-&gt;<span class="built_in">show</span>();</span><br><span class="line">        dlg2-&gt;<span class="built_in">setAttribute</span>(Qt::WA_DeleteOnClose);<span class="comment">//55号属性</span></span><br><span class="line">        </span><br><span class="line">        <span class="built_in">qDebug</span>() &lt;&lt; <span class="string">&quot;非模态对话框弹出了&quot;</span>;</span><br><span class="line"></span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">MainWindow::~<span class="built_in">MainWindow</span>()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">delete</span> ui;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h2 id="标准对话框"><a href="#标准对话框" class="headerlink" title="标准对话框"></a>标准对话框</h2><p>消息对话框</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;mainwindow.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;./ui_mainwindow.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QDialog&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QDebug&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QMessageBox&gt;</span></span></span><br><span class="line"></span><br><span class="line">MainWindow::<span class="built_in">MainWindow</span>(QWidget *parent)</span><br><span class="line">    : <span class="built_in">QMainWindow</span>(parent)</span><br><span class="line">    , <span class="built_in">ui</span>(<span class="keyword">new</span> Ui::MainWindow)</span><br><span class="line">&#123;</span><br><span class="line">    ui-&gt;<span class="built_in">setupUi</span>(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//点击新建按钮，弹出一个对话框</span></span><br><span class="line">    <span class="built_in">connect</span>(ui-&gt;actionnew,&amp;QAction::triggered, [=]()&#123;</span><br><span class="line">        <span class="comment">//对话框 分类</span></span><br><span class="line">        <span class="comment">//模态对话框（不可以对其他窗口进行操作）  非模态对话框（可以对其他窗口进行操作）</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// //模态创建  阻塞</span></span><br><span class="line">        <span class="comment">// QDialog dlg(this);</span></span><br><span class="line">        <span class="comment">// dlg.resize(300,200);</span></span><br><span class="line">        <span class="comment">// dlg.exec();</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// exec()：是 QDialog 类的成员函数，用于以模态（Modal）的方式显示对话框。</span></span><br><span class="line">        <span class="comment">// 模态对话框会阻塞程序的执行，直到用户关闭对话框并返回结果。</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// qDebug() &lt;&lt; &quot;模态对话框弹出了&quot;;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">// //非模态对话框</span></span><br><span class="line">        <span class="comment">// QDialog * dlg2 = new QDialog(this);</span></span><br><span class="line">        <span class="comment">// dlg2-&gt;resize(300,200);</span></span><br><span class="line">        <span class="comment">// dlg2-&gt;show();</span></span><br><span class="line">        <span class="comment">// dlg2-&gt;setAttribute(Qt::WA_DeleteOnClose);//55号属性</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// qDebug() &lt;&lt; &quot;非模态对话框弹出了&quot;;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//消息对话框-----------------------------------------</span></span><br><span class="line">        <span class="comment">// //错误对话框</span></span><br><span class="line">        <span class="comment">// QMessageBox::critical(this, &quot;critical&quot;, &quot;error&quot;);</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// //信息对话框</span></span><br><span class="line">        <span class="comment">// QMessageBox::information(this, &quot;info&quot;, &quot;information&quot;);</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//提问对话框</span></span><br><span class="line">        <span class="comment">//参数1 父亲 参数2 标题 参数3 提示内容 参数4 按键类型 参数5 默认关联回车按键</span></span><br><span class="line">        <span class="comment">//QMessageBox::question(this, &quot;ques&quot;, &quot;question&quot;);</span></span><br><span class="line">        <span class="comment">//QMessageBox::question(this, &quot;ques&quot;, &quot;question&quot;, QMessageBox::Save | QMessageBox::Cancel);</span></span><br><span class="line">        <span class="comment">//QMessageBox::question(this, &quot;ques&quot;, &quot;question&quot;, QMessageBox::Save | QMessageBox::Cancel, QMessageBox::Cancel);</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// if (QMessageBox::Save == QMessageBox::question(this, &quot;ques&quot;, &quot;question&quot;, QMessageBox::Save | QMessageBox::Cancel))</span></span><br><span class="line">        <span class="comment">// &#123;</span></span><br><span class="line">        <span class="comment">//     qDebug() &lt;&lt; &quot;select save&quot;;</span></span><br><span class="line">        <span class="comment">// &#125;</span></span><br><span class="line">        <span class="comment">// else</span></span><br><span class="line">        <span class="comment">// &#123;</span></span><br><span class="line">        <span class="comment">//     qDebug() &lt;&lt; &quot;select cancel&quot;;</span></span><br><span class="line">        <span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//警告对话框</span></span><br><span class="line">        QMessageBox::<span class="built_in">warning</span>(<span class="keyword">this</span>, <span class="string">&quot;war&quot;</span>, <span class="string">&quot;waring&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">MainWindow::~<span class="built_in">MainWindow</span>()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">delete</span> ui;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/img/loading.gif" data-original="/posts/abd0a875/6.png"></p>
<p><img src="/img/loading.gif" data-original="/posts/abd0a875/7.png"></p>
<p><img src="/img/loading.gif" data-original="/posts/abd0a875/8.png"></p>
<p><img src="/img/loading.gif" data-original="/posts/abd0a875/9.png"></p>
<p><img src="/img/loading.gif" data-original="/posts/abd0a875/10.png"></p>
<p><strong>其他标准对话框</strong></p>
<p>QColorDialog：		选择颜色</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//颜色对话框</span></span><br><span class="line"><span class="comment">//QColorDialog::getColor(QColor(255,0,0));</span></span><br><span class="line">QColor color = QColorDialog::<span class="built_in">getColor</span>(<span class="built_in">QColor</span>(<span class="number">255</span>,<span class="number">0</span>,<span class="number">0</span>));</span><br><span class="line"><span class="built_in">qDebug</span>() &lt;&lt; <span class="string">&quot;r = &quot;</span> &lt;&lt; color.<span class="built_in">red</span>() &lt;&lt; <span class="string">&quot;g = &quot;</span> &lt;&lt; color.<span class="built_in">green</span>() &lt;&lt; <span class="string">&quot;b = &quot;</span></span><br><span class="line">         &lt;&lt; color.<span class="built_in">blue</span>();</span><br></pre></td></tr></table></figure>

<p><img src="/img/loading.gif" data-original="/posts/abd0a875/11.png"></p>
<p>QFileDialog：			选择文件或者目录</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//文件对话框</span></span><br><span class="line"><span class="comment">//参数1 父亲 参数2 标题 参数3 默认打开路径 参数4 过滤文件格式</span></span><br><span class="line"><span class="comment">//返回值是选取的路径</span></span><br><span class="line">QString str = QFileDialog::<span class="built_in">getOpenFileName</span>(<span class="keyword">this</span>, <span class="string">&quot;open file&quot;</span>, <span class="string">&quot;C:\\Users\\****\\Desktop&quot;</span>, <span class="string">&quot;(*.txt)&quot;</span>);</span><br><span class="line"><span class="built_in">qDebug</span>() &lt;&lt; str;</span><br></pre></td></tr></table></figure>

<p>QFontDialog：			选择字体</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//字体对话框</span></span><br><span class="line"><span class="type">bool</span> flag;</span><br><span class="line">QFont font = QFontDialog::<span class="built_in">getFont</span>(&amp;flag, <span class="built_in">QFont</span>(<span class="string">&quot;华文彩云&quot;</span>, <span class="number">36</span>));</span><br><span class="line"><span class="built_in">qDebug</span>() &lt;&lt; <span class="string">&quot;字体：&quot;</span> &lt;&lt; font.<span class="built_in">family</span>().<span class="built_in">toUtf8</span>().<span class="built_in">data</span>() &lt;&lt; <span class="string">&quot;字号：&quot;</span> &lt;&lt; font.<span class="built_in">pointSize</span>()</span><br><span class="line">          &lt;&lt; <span class="string">&quot;是否加粗：&quot;</span> &lt;&lt; font.<span class="built_in">bold</span>() &lt;&lt; <span class="string">&quot;是否倾斜：&quot;</span> &lt;&lt; font.<span class="built_in">italic</span>();</span><br></pre></td></tr></table></figure>

<p>QInputDialog：		允许用户输入一个值，并将其值返回</p>
<p>QMessageBox：			模态对话框，用于显示信息、询问问题等</p>
<p>QPageSetupDialog：	为打印机提供纸张相关的选项</p>
<p>QPrintDialog：		打印机配置</p>
<p>QPrintPreviewDialog：打印预览</p>
<p>QProgressDialog：		显示操作过程</p>
<h1 id="界面布局"><a href="#界面布局" class="headerlink" title="界面布局"></a>界面布局</h1><h2 id="实现登录窗口"><a href="#实现登录窗口" class="headerlink" title="实现登录窗口"></a>实现登录窗口</h2><p>利用布局方式给窗口进行美化</p>
<p>选取widget进行布局，水平布局，垂直布局，栅格布局</p>
<p>给用户名、密码、登录、退出按钮进行布局</p>
<p>默认窗口和控件之间有6像素，可以调整layoutLeftMargin</p>
<p>利用弹簧进行布局</p>
<p>调整固定高度</p>
<p><img src="/img/loading.gif" data-original="/posts/abd0a875/12.png"></p>
<h1 id="常用控件"><a href="#常用控件" class="headerlink" title="常用控件"></a>常用控件</h1><h2 id="按钮组"><a href="#按钮组" class="headerlink" title="按钮组"></a>按钮组</h2><p>QPushButton  常用按钮</p>
<p>QToolButton  工具按钮 用于显示图片 显示文字</p>
<p>toolButtonStyle  凸起风格 autoRaise</p>
<p>radioButton  单选按钮 默认ui-&gt;radioButtonMan-&gt;setChecked(true);</p>
<p>checkBox  多选按钮 监听状态 </p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//设置单选按钮 男默认选中</span></span><br><span class="line">ui-&gt;radioButtonMan-&gt;<span class="built_in">setChecked</span>(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//选中女后打印信息</span></span><br><span class="line"><span class="built_in">connect</span>(ui-&gt;radioButtonWoman, &amp;QRadioButton::clicked, [=]()&#123;</span><br><span class="line">    <span class="built_in">qDebug</span>() &lt;&lt; <span class="string">&quot;select woman!&quot;</span>;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//多选按钮   2是选中  0是未选中  1是半选</span></span><br><span class="line"><span class="built_in">connect</span>(ui-&gt;checkBox_4, &amp;QCheckBox::stateChanged, [=](<span class="type">int</span> state)&#123;</span><br><span class="line">    <span class="built_in">qDebug</span>() &lt;&lt; state;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><img src="/img/loading.gif" data-original="/posts/abd0a875/13.png"></p>
<h2 id="QListWidgetItem-列表容器"><a href="#QListWidgetItem-列表容器" class="headerlink" title="QListWidgetItem 列表容器"></a>QListWidgetItem 列表容器</h2><p>QListWidgetItem * item        一行内容<br>ui-&gt;listWidget-&gt;addItem(item)</p>
<p>可以利用additems一次性添加整个内容</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// //利用listWidget写诗</span></span><br><span class="line"><span class="comment">// QListWidgetItem * item = new QListWidgetItem(&quot;人生天地间&quot;);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// //将一行诗放入到listWidget控件中</span></span><br><span class="line"><span class="comment">// ui-&gt;listWidget-&gt;addItem(item);</span></span><br><span class="line"><span class="comment">//设置居中方式</span></span><br><span class="line"><span class="comment">// item-&gt;setTextAlignment(Qt::AlignCenter);</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//QStringList  QList&lt;QString&gt;</span></span><br><span class="line">QStringList list;</span><br><span class="line">list &lt;&lt; <span class="string">&quot;人生天地间&quot;</span> &lt;&lt; <span class="string">&quot;忽如远行客&quot;</span> &lt;&lt; <span class="string">&quot;斗酒相娱乐&quot;</span> &lt;&lt; <span class="string">&quot;聊厚不为薄&quot;</span>;</span><br><span class="line">ui-&gt;listWidget-&gt;<span class="built_in">addItems</span>(list);</span><br></pre></td></tr></table></figure>

<p><img src="/img/loading.gif" data-original="/posts/abd0a875/14.png"></p>
<h2 id="QTreeWidget-树控件"><a href="#QTreeWidget-树控件" class="headerlink" title="QTreeWidget 树控件"></a>QTreeWidget 树控件</h2><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//treeWidget控件的使用</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//设置水平头</span></span><br><span class="line">ui-&gt;treeWidget-&gt;<span class="built_in">setHeaderLabels</span>(<span class="built_in">QStringList</span>()&lt;&lt; <span class="string">&quot;一&quot;</span> &lt;&lt; <span class="string">&quot;内容&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建顶层节点</span></span><br><span class="line">QTreeWidgetItem * liTtem = <span class="keyword">new</span> <span class="built_in">QTreeWidgetItem</span>(<span class="built_in">QStringList</span>()&lt;&lt; <span class="string">&quot;一&quot;</span>);</span><br><span class="line">QTreeWidgetItem * liTtem2 = <span class="keyword">new</span> <span class="built_in">QTreeWidgetItem</span>(<span class="built_in">QStringList</span>()&lt;&lt; <span class="string">&quot;二&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//加载顶层节点</span></span><br><span class="line">ui-&gt;treeWidget-&gt;<span class="built_in">addTopLevelItem</span>(liTtem);</span><br><span class="line">ui-&gt;treeWidget-&gt;<span class="built_in">addTopLevelItem</span>(liTtem2);</span><br><span class="line"></span><br><span class="line"><span class="comment">//追加子节点</span></span><br><span class="line"><span class="comment">//QTreeWidgetItem * ll = new QTreeWidgetItem(QStringList()&lt;&lt; &quot;一帆一江一渔舟&quot;&lt;&lt;&quot;一个渔翁一个钩&quot;);</span></span><br><span class="line"><span class="comment">// QStringList first;</span></span><br><span class="line"><span class="comment">// first &lt;&lt; &quot;一帆一江一渔舟，一个渔翁一个钩&quot;;</span></span><br><span class="line"><span class="comment">// QTreeWidgetItem * ll = new QTreeWidgetItem(first);</span></span><br><span class="line"><span class="comment">// liTtem-&gt;addChild(ll);</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// QStringList second;</span></span><br><span class="line"><span class="comment">// second &lt;&lt; &quot;一俯一仰一场笑，一江明月一江秋&quot;;</span></span><br><span class="line"><span class="comment">// QTreeWidgetItem * ll2 = new QTreeWidgetItem(second);</span></span><br><span class="line"><span class="comment">// liTtem2-&gt;addChild(ll2);</span></span><br><span class="line"></span><br><span class="line">QTreeWidgetItem *childItem1 = <span class="keyword">new</span> <span class="built_in">QTreeWidgetItem</span>(<span class="built_in">QStringList</span>() &lt;&lt;<span class="string">&quot;&quot;</span>&lt;&lt;<span class="string">&quot;一帆一江一渔舟，一个渔翁一个钩&quot;</span>);</span><br><span class="line">QTreeWidgetItem *childItem2 = <span class="keyword">new</span> <span class="built_in">QTreeWidgetItem</span>(<span class="built_in">QStringList</span>() &lt;&lt; <span class="string">&quot;&quot;</span>&lt;&lt;<span class="string">&quot;一俯一仰一场笑，一江明月一江秋&quot;</span>);</span><br><span class="line">liTtem-&gt;<span class="built_in">addChild</span>(childItem1);</span><br><span class="line">liTtem2-&gt;<span class="built_in">addChild</span>(childItem2);</span><br></pre></td></tr></table></figure>

<p><img src="/img/loading.gif" data-original="/posts/abd0a875/15.png"></p>
<h2 id="QTableWidget-表格控件"><a href="#QTableWidget-表格控件" class="headerlink" title="QTableWidget 表格控件"></a>QTableWidget 表格控件</h2><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//TableWidget 控件</span></span><br><span class="line"><span class="comment">//设置列数</span></span><br><span class="line">ui-&gt;tableWidget-&gt;<span class="built_in">setColumnCount</span>(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//设置水平表头</span></span><br><span class="line">ui-&gt;tableWidget-&gt;<span class="built_in">setHorizontalHeaderLabels</span>(<span class="built_in">QStringList</span>()&lt;&lt;<span class="string">&quot;姓名&quot;</span>&lt;&lt;<span class="string">&quot;性别&quot;</span>&lt;&lt;<span class="string">&quot;年龄&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//设置行数</span></span><br><span class="line">ui-&gt;tableWidget-&gt;<span class="built_in">setRowCount</span>(<span class="number">5</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//设置正文</span></span><br><span class="line"><span class="comment">//ui-&gt;tableWidget-&gt;setItem(0,0,new QTableWidgetItem(&quot;小李&quot;));</span></span><br><span class="line"></span><br><span class="line">QStringList nameList;</span><br><span class="line">nameList&lt;&lt;<span class="string">&quot;小李&quot;</span>&lt;&lt;<span class="string">&quot;小王&quot;</span>&lt;&lt;<span class="string">&quot;小杨&quot;</span>&lt;&lt;<span class="string">&quot;小刘&quot;</span>&lt;&lt;<span class="string">&quot;小赵&quot;</span>;</span><br><span class="line"></span><br><span class="line">QList&lt;QString&gt;sexList;</span><br><span class="line">sexList&lt;&lt;<span class="string">&quot;女&quot;</span>&lt;&lt;<span class="string">&quot;女&quot;</span>&lt;&lt;<span class="string">&quot;女&quot;</span>&lt;&lt;<span class="string">&quot;女&quot;</span>&lt;&lt;<span class="string">&quot;女&quot;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt;<span class="number">5</span>; i++) &#123;</span><br><span class="line">    <span class="type">int</span> col = <span class="number">0</span>;</span><br><span class="line">    ui-&gt;tableWidget-&gt;<span class="built_in">setItem</span>(i,col++,<span class="keyword">new</span> <span class="built_in">QTableWidgetItem</span>(nameList[i]));</span><br><span class="line">    ui-&gt;tableWidget-&gt;<span class="built_in">setItem</span>(i,col++,<span class="keyword">new</span> <span class="built_in">QTableWidgetItem</span>(sexList.<span class="built_in">at</span>(i))); <span class="comment">//at越界抛出异常</span></span><br><span class="line">    <span class="comment">//int 转 QString</span></span><br><span class="line">    ui-&gt;tableWidget-&gt;<span class="built_in">setItem</span>(i,col++,<span class="keyword">new</span> <span class="built_in">QTableWidgetItem</span>(QString::<span class="built_in">number</span>(i+<span class="number">18</span>)));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/img/loading.gif" data-original="/posts/abd0a875/16.png"></p>
<h2 id="其他控件"><a href="#其他控件" class="headerlink" title="其他控件"></a>其他控件</h2><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//栈控件的使用---------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//设置默认定位Button</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//Button按钮</span></span><br><span class="line"><span class="built_in">connect</span>(ui-&gt;Button, &amp;QPushButton::clicked, [=]()&#123;</span><br><span class="line">    ui-&gt;stackedWidget-&gt;<span class="built_in">setCurrentIndex</span>(<span class="number">0</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//buttonTabBox按钮</span></span><br><span class="line"><span class="built_in">connect</span>(ui-&gt;buttonTabBox, &amp;QPushButton::clicked, [=]()&#123;</span><br><span class="line">    ui-&gt;stackedWidget-&gt;<span class="built_in">setCurrentIndex</span>(<span class="number">1</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//ButtonTabWidget按钮</span></span><br><span class="line"><span class="built_in">connect</span>(ui-&gt;ButtonTabWidget, &amp;QPushButton::clicked, [=]()&#123;</span><br><span class="line">    ui-&gt;stackedWidget-&gt;<span class="built_in">setCurrentIndex</span>(<span class="number">2</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//--------------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//下拉框</span></span><br><span class="line">ui-&gt;comboBox-&gt;<span class="built_in">addItem</span>(<span class="string">&quot;杜鹃&quot;</span>);</span><br><span class="line">ui-&gt;comboBox-&gt;<span class="built_in">addItem</span>(<span class="string">&quot;樱花&quot;</span>);</span><br><span class="line">ui-&gt;comboBox-&gt;<span class="built_in">addItem</span>(<span class="string">&quot;海棠&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//点击按钮 选中海棠</span></span><br><span class="line"><span class="built_in">connect</span>(ui-&gt;btnSelect, &amp;QPushButton::clicked, [=]()&#123;</span><br><span class="line">    <span class="comment">//ui-&gt;comboBox-&gt;setCurrentIndex(2);</span></span><br><span class="line">    ui-&gt;comboBox-&gt;<span class="built_in">setCurrentText</span>(<span class="string">&quot;海棠&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//-------------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//利用QLabel显示图片</span></span><br><span class="line">ui-&gt;labelImage-&gt;<span class="built_in">setPixmap</span>(<span class="built_in">QPixmap</span>(<span class="string">&quot;:/image/005y0Ylbly1hj9kxm09i0j31kw1kw1ky.jpg&quot;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">//利用QLabel显示gif动态图片</span></span><br><span class="line">QMovie * movie = <span class="keyword">new</span> <span class="built_in">QMovie</span>(<span class="string">&quot;:/image/小太阳gif.jpg&quot;</span>);</span><br><span class="line">ui-&gt;labelMovie-&gt;<span class="built_in">setMovie</span>(movie);</span><br><span class="line"><span class="comment">//播放动图</span></span><br><span class="line">movie-&gt;<span class="built_in">start</span>();</span><br></pre></td></tr></table></figure>

<p><img src="/img/loading.gif" data-original="/posts/abd0a875/17.png"></p>
<h1 id="自定义控件封装"><a href="#自定义控件封装" class="headerlink" title="自定义控件封装"></a>自定义控件封装</h1><p>添加新文件——QT——设计师界面类(.h   .cpp   .ui)</p>
<p>.ui中设计QStringBox 和 QSlider 两个控件 组成一个控件</p>
<p>Widget中使用自定义控件 拖拽一个Widget控件 点击提升为  添加类名等</p>
<p>实现功能 改变数字 滑动条跟着移动</p>
<p>提供getNumber和setNumber两个对外接口</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> SMALLWIDGET_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SMALLWIDGET_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QWidget&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> Ui &#123;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SmallWidget</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SmallWidget</span> : <span class="keyword">public</span> QWidget</span><br><span class="line">&#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">explicit</span> <span class="title">SmallWidget</span><span class="params">(QWidget *parent = <span class="literal">nullptr</span>)</span></span>;</span><br><span class="line">    ~<span class="built_in">SmallWidget</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//设置数字</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">setNumber</span><span class="params">(<span class="type">int</span> num)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取数字</span></span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">getNumber</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    Ui::SmallWidget *ui;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">// SMALLWIDGET_H</span></span></span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;smallwidget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ui_smallwidget.h&quot;</span></span></span><br><span class="line"></span><br><span class="line">SmallWidget::<span class="built_in">SmallWidget</span>(QWidget *parent)</span><br><span class="line">    : <span class="built_in">QWidget</span>(parent)</span><br><span class="line">    , <span class="built_in">ui</span>(<span class="keyword">new</span> Ui::SmallWidget)</span><br><span class="line">&#123;</span><br><span class="line">    ui-&gt;<span class="built_in">setupUi</span>(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//QStringBox数字改变 QSlider跟着移动</span></span><br><span class="line">    <span class="built_in">connect</span>(ui-&gt;spinBox, &amp;QSpinBox::valueChanged, ui-&gt;horizontalSlider, &amp;QSlider::setValue);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//QSlider滑动 QStringBox数字跟着改变</span></span><br><span class="line">    <span class="built_in">connect</span>(ui-&gt;horizontalSlider, &amp;QSlider::valueChanged, ui-&gt;spinBox, &amp;QSpinBox::setValue);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//设置数字</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">SmallWidget::setNumber</span><span class="params">(<span class="type">int</span> num)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ui-&gt;spinBox-&gt;<span class="built_in">setValue</span>(num);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//获取数字</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">SmallWidget::getNumber</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> ui-&gt;spinBox-&gt;<span class="built_in">value</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">SmallWidget::~<span class="built_in">SmallWidget</span>()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">delete</span> ui;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> WIDGET_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> WIDGET_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QWidget&gt;</span></span></span><br><span class="line"></span><br><span class="line">QT_BEGIN_NAMESPACE</span><br><span class="line"><span class="keyword">namespace</span> Ui &#123;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Widget</span>;</span><br><span class="line">&#125;</span><br><span class="line">QT_END_NAMESPACE</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Widget</span> : <span class="keyword">public</span> QWidget</span><br><span class="line">&#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Widget</span>(QWidget *parent = <span class="literal">nullptr</span>);</span><br><span class="line">    ~<span class="built_in">Widget</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    Ui::Widget *ui;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">// WIDGET_H</span></span></span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;widget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ui_widget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QDebug&gt;</span></span></span><br><span class="line"></span><br><span class="line">Widget::<span class="built_in">Widget</span>(QWidget *parent)</span><br><span class="line">    : <span class="built_in">QWidget</span>(parent)</span><br><span class="line">    , <span class="built_in">ui</span>(<span class="keyword">new</span> Ui::Widget)</span><br><span class="line">&#123;</span><br><span class="line">    ui-&gt;<span class="built_in">setupUi</span>(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//点击获取  获取控件当前的值</span></span><br><span class="line">    <span class="built_in">connect</span>(ui-&gt;btnGet, &amp;QPushButton::clicked, [=]()&#123;</span><br><span class="line">        <span class="built_in">qDebug</span>() &lt;&lt; ui-&gt;widget-&gt;<span class="built_in">getNumber</span>();</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//点击设置  设置到一半</span></span><br><span class="line">    <span class="built_in">connect</span>(ui-&gt;btnSet, &amp;QPushButton::clicked, [=]()&#123;</span><br><span class="line">        ui-&gt;widget-&gt;<span class="built_in">setNumber</span>(<span class="number">50</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Widget::~<span class="built_in">Widget</span>()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">delete</span> ui;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/img/loading.gif" data-original="/posts/abd0a875/18.png"></p>
<p><img src="/img/loading.gif" data-original="/posts/abd0a875/19.png"></p>
<h1 id="Qt-中的事件"><a href="#Qt-中的事件" class="headerlink" title="Qt 中的事件"></a>Qt 中的事件</h1><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> MYLABEL_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MYLABEL_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QLabel&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QEnterEvent&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">myLabel</span> : <span class="keyword">public</span> QLabel</span><br><span class="line">&#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">explicit</span> <span class="title">myLabel</span><span class="params">(QWidget *parent = <span class="literal">nullptr</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//鼠标进入事件</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">enterEvent</span><span class="params">(QEnterEvent *event)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//鼠标离开事件</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">leaveEvent</span><span class="params">(QEvent *event)</span></span>;</span><br><span class="line"></span><br><span class="line">signals:</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">// MYLABEL_H</span></span></span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;mylabel.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QDebug&gt;</span></span></span><br><span class="line"></span><br><span class="line">myLabel::<span class="built_in">myLabel</span>(QWidget *parent)</span><br><span class="line">    : QLabel&#123;parent&#125;</span><br><span class="line">&#123;&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//鼠标进入事件</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">myLabel::enterEvent</span><span class="params">(QEnterEvent *event)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">qDebug</span>()&lt;&lt; <span class="string">&quot;鼠标进入了&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//鼠标离开事件</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">myLabel::leaveEvent</span><span class="params">(QEvent *event)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">qDebug</span>()&lt;&lt; <span class="string">&quot;鼠标离开了&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/img/loading.gif" data-original="/posts/abd0a875/20.png"></p>
<p><strong>其他</strong></p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//鼠标按下</span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">mousePressEvent</span><span class="params">(QMouseEvent *ev)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//鼠标释放</span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">mouseReleaseEvent</span><span class="params">(QMouseEvent *ev)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//鼠标移动</span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">mouseMoveEvent</span><span class="params">(QMouseEvent *ev)</span></span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;mylabel.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QDebug&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QMouseEvent&gt;</span></span></span><br><span class="line"></span><br><span class="line">myLabel::<span class="built_in">myLabel</span>(QWidget *parent)</span><br><span class="line">    : QLabel&#123;parent&#125;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//设置鼠标追踪</span></span><br><span class="line">    <span class="built_in">setMouseTracking</span>(<span class="literal">true</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//鼠标按下</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">myLabel::mousePressEvent</span><span class="params">(QMouseEvent *ev)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//当鼠标左键按下  提示信息</span></span><br><span class="line">    <span class="keyword">if</span> (ev-&gt;<span class="built_in">button</span>() == Qt::LeftButton)</span><br><span class="line">    &#123;</span><br><span class="line">        QString str = <span class="built_in">QString</span>(<span class="string">&quot;鼠标按下了 x = %1  y = %2  &quot;</span></span><br><span class="line">                              <span class="string">&quot;globalx = %3  globaly = %4&quot;</span>).<span class="built_in">arg</span>(ev-&gt;<span class="built_in">x</span>()).<span class="built_in">arg</span>(ev-&gt;<span class="built_in">y</span>())</span><br><span class="line">                        .<span class="built_in">arg</span>(ev-&gt;<span class="built_in">globalX</span>()).<span class="built_in">arg</span>(ev-&gt;<span class="built_in">globalY</span>());</span><br><span class="line">        <span class="comment">//qDebug()&lt;&lt; &quot;鼠标按下了&quot;;</span></span><br><span class="line">        <span class="built_in">qDebug</span>()&lt;&lt; str;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//鼠标释放</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">myLabel::mouseReleaseEvent</span><span class="params">(QMouseEvent *ev)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// if (ev-&gt;button() == Qt::LeftButton)</span></span><br><span class="line">    <span class="comment">// &#123;</span></span><br><span class="line">        QString str = <span class="built_in">QString</span>(<span class="string">&quot;鼠标释放了 x = %1  y = %2  &quot;</span></span><br><span class="line">                              <span class="string">&quot;globalx = %3  globaly = %4&quot;</span>).<span class="built_in">arg</span>(ev-&gt;<span class="built_in">x</span>()).<span class="built_in">arg</span>(ev-&gt;<span class="built_in">y</span>())</span><br><span class="line">                          .<span class="built_in">arg</span>(ev-&gt;<span class="built_in">globalX</span>()).<span class="built_in">arg</span>(ev-&gt;<span class="built_in">globalY</span>());</span><br><span class="line">        <span class="built_in">qDebug</span>()&lt;&lt; str;</span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//鼠标移动</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">myLabel::mouseMoveEvent</span><span class="params">(QMouseEvent *ev)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// if (ev-&gt;buttons() &amp; Qt::LeftButton)</span></span><br><span class="line">    <span class="comment">// &#123;</span></span><br><span class="line">        QString str = <span class="built_in">QString</span>(<span class="string">&quot;鼠标移动了 x = %1  y = %2  &quot;</span></span><br><span class="line">                              <span class="string">&quot;globalx = %3  globaly = %4&quot;</span>).<span class="built_in">arg</span>(ev-&gt;<span class="built_in">x</span>()).<span class="built_in">arg</span>(ev-&gt;<span class="built_in">y</span>())</span><br><span class="line">                          .<span class="built_in">arg</span>(ev-&gt;<span class="built_in">globalX</span>()).<span class="built_in">arg</span>(ev-&gt;<span class="built_in">globalY</span>());</span><br><span class="line">        <span class="built_in">qDebug</span>()&lt;&lt; str;</span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h2 id="定时器"><a href="#定时器" class="headerlink" title="定时器"></a>定时器</h2><h3 id="第一种定时器"><a href="#第一种定时器" class="headerlink" title="第一种定时器"></a>第一种定时器</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> WIDGET_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> WIDGET_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QWidget&gt;</span></span></span><br><span class="line"></span><br><span class="line">QT_BEGIN_NAMESPACE</span><br><span class="line"><span class="keyword">namespace</span> Ui &#123;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Widget</span>;</span><br><span class="line">&#125;</span><br><span class="line">QT_END_NAMESPACE</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Widget</span> : <span class="keyword">public</span> QWidget</span><br><span class="line">&#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Widget</span>(QWidget *parent = <span class="literal">nullptr</span>);</span><br><span class="line">    ~<span class="built_in">Widget</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//重写定时器的事件</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">timerEvent</span><span class="params">(QTimerEvent *)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> id1; <span class="comment">//定时器1的唯一标识</span></span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> id2; <span class="comment">//定时器2的唯一标识</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    Ui::Widget *ui;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">// WIDGET_H</span></span></span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;widget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ui_widget.h&quot;</span></span></span><br><span class="line"></span><br><span class="line">Widget::<span class="built_in">Widget</span>(QWidget *parent)</span><br><span class="line">    : <span class="built_in">QWidget</span>(parent)</span><br><span class="line">    , <span class="built_in">ui</span>(<span class="keyword">new</span> Ui::Widget)</span><br><span class="line">&#123;</span><br><span class="line">    ui-&gt;<span class="built_in">setupUi</span>(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//启动定时器</span></span><br><span class="line">    <span class="comment">//参数1 间隔(单位 毫秒)</span></span><br><span class="line">    id1 = <span class="built_in">startTimer</span>(<span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line">    id2 = <span class="built_in">startTimer</span>(<span class="number">2000</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//重写定时器的事件</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Widget::timerEvent</span><span class="params">(QTimerEvent *ev)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (ev-&gt;<span class="built_in">timerId</span>() == id1)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">static</span> <span class="type">int</span> num = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//label_2每隔1秒+1</span></span><br><span class="line">        ui-&gt;label_2-&gt;<span class="built_in">setText</span>(QString::<span class="built_in">number</span>(num++));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (ev-&gt;<span class="built_in">timerId</span>() == id2)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//label_2每隔2秒+1</span></span><br><span class="line">        <span class="type">static</span> <span class="type">int</span> num2 = <span class="number">1</span>;</span><br><span class="line">        ui-&gt;label_3-&gt;<span class="built_in">setText</span>(QString::<span class="built_in">number</span>(num2++));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Widget::~<span class="built_in">Widget</span>()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">delete</span> ui;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="第二种定时器"><a href="#第二种定时器" class="headerlink" title="第二种定时器"></a>第二种定时器</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;widget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ui_widget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QTimer&gt;</span></span></span><br><span class="line"></span><br><span class="line">Widget::<span class="built_in">Widget</span>(QWidget *parent)</span><br><span class="line">    : <span class="built_in">QWidget</span>(parent)</span><br><span class="line">    , <span class="built_in">ui</span>(<span class="keyword">new</span> Ui::Widget)</span><br><span class="line">&#123;</span><br><span class="line">    ui-&gt;<span class="built_in">setupUi</span>(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//启动定时器</span></span><br><span class="line">    <span class="comment">//参数1 间隔(单位 毫秒)</span></span><br><span class="line">    id1 = <span class="built_in">startTimer</span>(<span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line">    id2 = <span class="built_in">startTimer</span>(<span class="number">2000</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//定时器的第二种方式</span></span><br><span class="line">    QTimer * timer = <span class="keyword">new</span> <span class="built_in">QTimer</span>(<span class="keyword">this</span>);</span><br><span class="line">    <span class="comment">//启动定时器</span></span><br><span class="line">    timer-&gt;<span class="built_in">start</span>(<span class="number">500</span>);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">connect</span>(timer, &amp;QTimer::timeout, [=]()&#123;</span><br><span class="line">        <span class="type">static</span> <span class="type">int</span> num = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//label_4每隔0.5秒+1</span></span><br><span class="line">        ui-&gt;label_4-&gt;<span class="built_in">setText</span>(QString::<span class="built_in">number</span>(num++));</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//重写定时器的事件</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Widget::timerEvent</span><span class="params">(QTimerEvent *ev)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (ev-&gt;<span class="built_in">timerId</span>() == id1)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">static</span> <span class="type">int</span> num = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//label_2每隔1秒+1</span></span><br><span class="line">        ui-&gt;label_2-&gt;<span class="built_in">setText</span>(QString::<span class="built_in">number</span>(num++));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (ev-&gt;<span class="built_in">timerId</span>() == id2)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//label_2每隔2秒+1</span></span><br><span class="line">        <span class="type">static</span> <span class="type">int</span> num2 = <span class="number">1</span>;</span><br><span class="line">        ui-&gt;label_3-&gt;<span class="built_in">setText</span>(QString::<span class="built_in">number</span>(num2++));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Widget::~<span class="built_in">Widget</span>()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">delete</span> ui;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/img/loading.gif" data-original="/posts/abd0a875/21.png"></p>
<h2 id="event-事件"><a href="#event-事件" class="headerlink" title="event 事件"></a>event 事件</h2><p>用于事件的分发</p>
<p>也可以做拦截操作  不建议</p>
<p><img src="/img/loading.gif" data-original="/posts/abd0a875/22.png"></p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//通过event事件分发器拦截鼠标按下事件</span></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">event</span><span class="params">(QEvent *e)</span></span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//通过event事件分发器拦截鼠标按下事件</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">myLabel::event</span><span class="params">(QEvent *e)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//如果鼠标按下 在event事件分发钟做拦截操作</span></span><br><span class="line">    <span class="keyword">if</span> (e-&gt;<span class="built_in">type</span>() == QEvent::MouseButtonPress)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//静态类型转换</span></span><br><span class="line">        QMouseEvent * ev = <span class="built_in">static_cast</span>&lt;QMouseEvent *&gt;(e);</span><br><span class="line">        QString str = <span class="built_in">QString</span>(<span class="string">&quot;event函数中 鼠标按下了 x = %1  y = %2 &quot;</span></span><br><span class="line">                              <span class="string">&quot;globalx = %3  globaly = %4&quot;</span>).<span class="built_in">arg</span>(ev-&gt;<span class="built_in">x</span>()).<span class="built_in">arg</span>(ev-&gt;<span class="built_in">y</span>())</span><br><span class="line">                          .<span class="built_in">arg</span>(ev-&gt;<span class="built_in">globalX</span>()).<span class="built_in">arg</span>(ev-&gt;<span class="built_in">globalY</span>());</span><br><span class="line">        <span class="built_in">qDebug</span>()&lt;&lt; str;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>; <span class="comment">//true代表用户自己处理这个事件 不向下分发</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//其他事件 交给父类处理 默认处理</span></span><br><span class="line">    <span class="keyword">return</span> QLabel::<span class="built_in">event</span>(e);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="事件过滤器"><a href="#事件过滤器" class="headerlink" title="事件过滤器"></a>事件过滤器</h2><p>通过事件过滤器，可以在程序分发到event事件之前再做一次高级拦截</p>
<p>两个步骤：</p>
<ol>
<li><p>给控件安装事件过滤器</p>
</li>
<li><p>重写eventfilter事件</p>
</li>
</ol>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//重写事件过滤器的事件</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">eventFilter</span><span class="params">(QObject *, QEvent *)</span></span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;widget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ui_widget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QTimer&gt;</span></span></span><br><span class="line"></span><br><span class="line">Widget::<span class="built_in">Widget</span>(QWidget *parent)</span><br><span class="line">    : <span class="built_in">QWidget</span>(parent)</span><br><span class="line">    , <span class="built_in">ui</span>(<span class="keyword">new</span> Ui::Widget)</span><br><span class="line">&#123;</span><br><span class="line">    ui-&gt;<span class="built_in">setupUi</span>(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//步骤一 安转事件过滤器</span></span><br><span class="line">    <span class="comment">//label 安装事件过滤器</span></span><br><span class="line">    ui-&gt;label-&gt;<span class="built_in">installEventFilter</span>(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//步骤二 重写事件过滤器的事件</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">Widget::eventFilter</span><span class="params">(QObject *obj, QEvent *e)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (obj == ui-&gt;label)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (e-&gt;<span class="built_in">type</span>() == QEvent::MouseButtonPress)</span><br><span class="line">        &#123;</span><br><span class="line">            QMouseEvent * ev = <span class="built_in">static_cast</span>&lt;QMouseEvent *&gt;(e);</span><br><span class="line">            QString str = <span class="built_in">QString</span>(<span class="string">&quot;事件过滤器中 鼠标按下了 x = %1  y = %2  &quot;</span></span><br><span class="line">                                  <span class="string">&quot;globalx = %3  globaly = %4&quot;</span>).<span class="built_in">arg</span>(ev-&gt;<span class="built_in">x</span>()).<span class="built_in">arg</span>(ev-&gt;<span class="built_in">y</span>())</span><br><span class="line">                              .<span class="built_in">arg</span>(ev-&gt;<span class="built_in">globalX</span>()).<span class="built_in">arg</span>(ev-&gt;<span class="built_in">globalY</span>());</span><br><span class="line">            <span class="built_in">qDebug</span>()&lt;&lt; str;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//其他默认处理</span></span><br><span class="line">    <span class="keyword">return</span> QWidget::<span class="built_in">eventFilter</span>(obj,e);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Widget::~<span class="built_in">Widget</span>()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">delete</span> ui;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="QPainter-绘图"><a href="#QPainter-绘图" class="headerlink" title="QPainter 绘图"></a>QPainter 绘图</h1><h2 id="基础设置"><a href="#基础设置" class="headerlink" title="基础设置"></a>基础设置</h2><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> WIDGET_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> WIDGET_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QWidget&gt;</span></span></span><br><span class="line"></span><br><span class="line">QT_BEGIN_NAMESPACE</span><br><span class="line"><span class="keyword">namespace</span> Ui &#123;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Widget</span>;</span><br><span class="line">&#125;</span><br><span class="line">QT_END_NAMESPACE</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Widget</span> : <span class="keyword">public</span> QWidget</span><br><span class="line">&#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Widget</span>(QWidget *parent = <span class="literal">nullptr</span>);</span><br><span class="line">    ~<span class="built_in">Widget</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//绘图事件</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">paintEvent</span><span class="params">(QPaintEvent *)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    Ui::Widget *ui;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">// WIDGET_H</span></span></span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;widget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ui_widget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QPainter&gt;</span></span></span><br><span class="line"></span><br><span class="line">Widget::<span class="built_in">Widget</span>(QWidget *parent)</span><br><span class="line">    : <span class="built_in">QWidget</span>(parent)</span><br><span class="line">    , <span class="built_in">ui</span>(<span class="keyword">new</span> Ui::Widget)</span><br><span class="line">&#123;</span><br><span class="line">    ui-&gt;<span class="built_in">setupUi</span>(<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//绘图事件</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Widget::paintEvent</span><span class="params">(QPaintEvent *)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//实例化画家类  this指定的是绘图的设备</span></span><br><span class="line">    <span class="function">QPainter <span class="title">painter</span><span class="params">(<span class="keyword">this</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//设置画笔</span></span><br><span class="line">    <span class="function">QPen <span class="title">pen</span><span class="params">(QColor(<span class="number">122</span>,<span class="number">168</span>,<span class="number">200</span>))</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//设置画笔宽度</span></span><br><span class="line">    pen.<span class="built_in">setWidth</span>(<span class="number">6</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//设置画笔风格</span></span><br><span class="line">    pen.<span class="built_in">setStyle</span>(Qt::DotLine);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//让画家使用这个笔</span></span><br><span class="line">    painter.<span class="built_in">setPen</span>(pen);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//设置画刷</span></span><br><span class="line">    <span class="function">QBrush <span class="title">brush</span><span class="params">(QColor(<span class="number">222</span>,<span class="number">222</span>,<span class="number">222</span>))</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//设置画刷风格</span></span><br><span class="line">    brush.<span class="built_in">setStyle</span>(Qt::Dense3Pattern);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//让画家使用画刷</span></span><br><span class="line">    painter.<span class="built_in">setBrush</span>(brush);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//画线</span></span><br><span class="line">    painter.<span class="built_in">drawLine</span>(<span class="built_in">QPoint</span>(<span class="number">0</span>,<span class="number">0</span>), <span class="built_in">QPoint</span>(<span class="number">100</span>,<span class="number">100</span>));</span><br><span class="line"></span><br><span class="line">    <span class="comment">//画圆 椭圆</span></span><br><span class="line">    painter.<span class="built_in">drawEllipse</span>(<span class="built_in">QPoint</span>(<span class="number">100</span>,<span class="number">100</span>),<span class="number">36</span>,<span class="number">66</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//画矩形</span></span><br><span class="line">    painter.<span class="built_in">drawRect</span>(<span class="built_in">QRect</span>(<span class="number">20</span>,<span class="number">20</span>,<span class="number">50</span>,<span class="number">50</span>));</span><br><span class="line"></span><br><span class="line">    <span class="comment">//画文字</span></span><br><span class="line">    painter.<span class="built_in">drawText</span>(<span class="built_in">QRect</span>(<span class="number">10</span>,<span class="number">200</span>,<span class="number">100</span>,<span class="number">50</span>),<span class="string">&quot;晴天与猫&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Widget::~<span class="built_in">Widget</span>()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">delete</span> ui;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/img/loading.gif" data-original="/posts/abd0a875/23.png"></p>
<h2 id="高级设置"><a href="#高级设置" class="headerlink" title="高级设置"></a>高级设置</h2><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">/////////////////高级设置/////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line"><span class="function">QPainter <span class="title">painter</span><span class="params">(<span class="keyword">this</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// painter.drawEllipse(QPoint(100,100),50,50);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// //设置抗锯齿能力  效率低</span></span><br><span class="line"><span class="comment">// painter.setRenderHint(QPainter::Antialiasing);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// painter.drawEllipse(QPoint(200,200),50,50);</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//画矩形</span></span><br><span class="line">painter.<span class="built_in">drawRect</span>(<span class="built_in">QRect</span>(<span class="number">20</span>,<span class="number">20</span>,<span class="number">50</span>,<span class="number">50</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">//移动画家</span></span><br><span class="line">painter.<span class="built_in">translate</span>(<span class="number">100</span>,<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//保存画家状态</span></span><br><span class="line">painter.<span class="built_in">save</span>();</span><br><span class="line"></span><br><span class="line">painter.<span class="built_in">drawRect</span>(<span class="built_in">QRect</span>(<span class="number">20</span>,<span class="number">20</span>,<span class="number">50</span>,<span class="number">50</span>));</span><br><span class="line"></span><br><span class="line">painter.<span class="built_in">translate</span>(<span class="number">100</span>,<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//还原画家保存状态</span></span><br><span class="line">painter.<span class="built_in">restore</span>();</span><br><span class="line"></span><br><span class="line">painter.<span class="built_in">drawRect</span>(<span class="built_in">QRect</span>(<span class="number">20</span>,<span class="number">20</span>,<span class="number">50</span>,<span class="number">50</span>));</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;widget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ui_widget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QPainter&gt;</span></span></span><br><span class="line"></span><br><span class="line">Widget::<span class="built_in">Widget</span>(QWidget *parent)</span><br><span class="line">    : <span class="built_in">QWidget</span>(parent)</span><br><span class="line">    , <span class="built_in">ui</span>(<span class="keyword">new</span> Ui::Widget)</span><br><span class="line">&#123;</span><br><span class="line">    ui-&gt;<span class="built_in">setupUi</span>(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">connect</span>(ui-&gt;pushButton,&amp;QPushButton::clicked,[=]()&#123;</span><br><span class="line">        posX += <span class="number">20</span>;</span><br><span class="line">        <span class="comment">//如果要手动调用绘图事件 用update更新</span></span><br><span class="line">        <span class="built_in">update</span>();</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//绘图事件</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Widget::paintEvent</span><span class="params">(QPaintEvent *)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">///////////////利用画家画资源图片//////////////////////</span></span><br><span class="line"></span><br><span class="line">    <span class="function">QPainter <span class="title">painter</span><span class="params">(<span class="keyword">this</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//如果超出屏幕 从0开始</span></span><br><span class="line">    <span class="keyword">if</span> (posX &gt; <span class="keyword">this</span>-&gt;<span class="built_in">width</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        posX = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">QPixmap <span class="title">pixmap</span><span class="params">(<span class="string">&quot;:/image/le.jpg&quot;</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">    QPixmap scaledPixmap = pixmap.<span class="built_in">scaled</span>(<span class="number">200</span>, <span class="number">200</span>, Qt::KeepAspectRatio);</span><br><span class="line"></span><br><span class="line">    painter.<span class="built_in">drawPixmap</span>(posX,<span class="number">10</span>,scaledPixmap);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Widget::~<span class="built_in">Widget</span>()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">delete</span> ui;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>update() 是一个 QWidget 类的成员函数，用于请求更新窗口部件的绘图</p>
<p>当调用 update() 函数时，Qt 将触发绘图事件，并重新绘制窗口部件</p>
<p>这意味着任何需要更新的视图都会被更新</p>
<p><img src="/img/loading.gif" data-original="/posts/abd0a875/24.png"></p>
<h2 id="绘图设备"><a href="#绘图设备" class="headerlink" title="绘图设备"></a>绘图设备</h2><p>绘图设备是指继承QPainterDevice的子类。Qt一共提供了四个这样的类，分别是QPixmap、QBitmap、QImage和 QPicture。</p>
<p>QPixmap专门为图像在屏幕上的显示做了优化</p>
<p>QBitmap是QPixmap的一个子类，它的色深限定为1，可以使用 QPixmap的isQBitmap()函数来确定这个QPixmap是不是一个QBitmap</p>
<p>QImage专门为图像的像素级访问做了优化。</p>
<p>QPicture则可以记录和重现QPainter的各条命令</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> WIDGET_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> WIDGET_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QWidget&gt;</span></span></span><br><span class="line"></span><br><span class="line">QT_BEGIN_NAMESPACE</span><br><span class="line"><span class="keyword">namespace</span> Ui &#123;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Widget</span>;</span><br><span class="line">&#125;</span><br><span class="line">QT_END_NAMESPACE</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Widget</span> : <span class="keyword">public</span> QWidget</span><br><span class="line">&#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Widget</span>(QWidget *parent = <span class="literal">nullptr</span>);</span><br><span class="line">    ~<span class="built_in">Widget</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//绘图事件</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">paintEvent</span><span class="params">(QPaintEvent *)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    Ui::Widget *ui;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">// WIDGET_H</span></span></span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;widget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ui_widget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QPixmap&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QPainter&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QImage&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QPicture&gt;</span></span></span><br><span class="line"></span><br><span class="line">Widget::<span class="built_in">Widget</span>(QWidget *parent)</span><br><span class="line">    : <span class="built_in">QWidget</span>(parent)</span><br><span class="line">    , <span class="built_in">ui</span>(<span class="keyword">new</span> Ui::Widget)</span><br><span class="line">&#123;</span><br><span class="line">    ui-&gt;<span class="built_in">setupUi</span>(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// //pixmap绘图设备   专门为平台做了显示的优化/////////////////////////</span></span><br><span class="line">    <span class="comment">// QPixmap pix(300,300);</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// //填充颜色</span></span><br><span class="line">    <span class="comment">// pix.fill(Qt::white);</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// //声明画家</span></span><br><span class="line">    <span class="comment">// QPainter painter(&amp;pix);</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// painter.setPen(QPen(Qt::blue));</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// painter.drawEllipse(QPoint(150,150),100,100);</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// //保存</span></span><br><span class="line">    <span class="comment">// pix.save(&quot;D:\\cpp\\QT\\pix.png&quot;);</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// //qimage 绘图设备  可以对像素进行访问//////////////////////////////</span></span><br><span class="line">    <span class="comment">// QImage img(300,300,QImage::Format_RGB32);</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// //填充颜色</span></span><br><span class="line">    <span class="comment">// img.fill(Qt::white);</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// //声明画家</span></span><br><span class="line">    <span class="comment">// QPainter painter(&amp;img);</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// painter.setPen(QPen(Qt::blue));</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// painter.drawEllipse(QPoint(150,150),100,100);</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// //保存</span></span><br><span class="line">    <span class="comment">// img.save(&quot;D:\\cpp\\QT\\img.png&quot;);</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//qpicture 绘图设备  可以记录和重现绘图指令///////////////////////////</span></span><br><span class="line"></span><br><span class="line">    QPicture pic;</span><br><span class="line"></span><br><span class="line">    QPainter painter;</span><br><span class="line">    <span class="comment">//开始往pic上画</span></span><br><span class="line">    painter.<span class="built_in">begin</span>(&amp;pic);</span><br><span class="line"></span><br><span class="line">    painter.<span class="built_in">setPen</span>(<span class="built_in">QPen</span>(Qt::cyan));</span><br><span class="line"></span><br><span class="line">    painter.<span class="built_in">drawEllipse</span>(<span class="built_in">QPoint</span>(<span class="number">150</span>,<span class="number">150</span>),<span class="number">100</span>,<span class="number">100</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//结束画画</span></span><br><span class="line">    painter.<span class="built_in">end</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//保存到磁盘</span></span><br><span class="line">    pic.<span class="built_in">save</span>(<span class="string">&quot;D:\\cpp\\QT\\pic.zt&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//绘图事件</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Widget::paintEvent</span><span class="params">(QPaintEvent *)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// QPainter painter(this);</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// //利用qimage 对像素进行修改///////////////////////////////////</span></span><br><span class="line">    <span class="comment">// QImage img;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// img.load(&quot;:/image/005y0Ylbly1hgh1g861whj30u00u00w5.jpg&quot;);</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// img = img.scaled(400, 400, Qt::KeepAspectRatio);</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// //修改像素点</span></span><br><span class="line">    <span class="comment">// for (int i = 50; i &lt; 100; i++)</span></span><br><span class="line">    <span class="comment">// &#123;</span></span><br><span class="line">    <span class="comment">//     for (int j = 50; j &lt; 100; j++)</span></span><br><span class="line">    <span class="comment">//     &#123;</span></span><br><span class="line">    <span class="comment">//         QRgb value = qRgb(200,0,0);</span></span><br><span class="line">    <span class="comment">//         img.setPixel(i, j, value);</span></span><br><span class="line">    <span class="comment">//     &#125;</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// painter.drawImage(0,0,img);</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//重现qpicture的绘图指令///////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line">    <span class="function">QPainter <span class="title">painter</span><span class="params">(<span class="keyword">this</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">    QPicture pic;</span><br><span class="line"></span><br><span class="line">    pic.<span class="built_in">load</span>(<span class="string">&quot;D:\\cpp\\QT\\pic.zt&quot;</span>);</span><br><span class="line"></span><br><span class="line">    painter.<span class="built_in">drawPicture</span>(<span class="number">0</span>,<span class="number">0</span>,pic);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Widget::~<span class="built_in">Widget</span>()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">delete</span> ui;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h1 id="文件系统"><a href="#文件系统" class="headerlink" title="文件系统"></a>文件系统</h1><p>QFile 对文件进行读写操作</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;widget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ui_widget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QFileDialog&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QFile&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QString&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QFileInfo&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QDebug&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QDateTime&gt;</span></span></span><br><span class="line"></span><br><span class="line">Widget::<span class="built_in">Widget</span>(QWidget *parent)</span><br><span class="line">    : <span class="built_in">QWidget</span>(parent)</span><br><span class="line">    , <span class="built_in">ui</span>(<span class="keyword">new</span> Ui::Widget)</span><br><span class="line">&#123;</span><br><span class="line">    ui-&gt;<span class="built_in">setupUi</span>(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//点击选取文件按钮，弹出文件对话框</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">connect</span>(ui-&gt;pushButton,&amp;QPushButton::clicked,[=]()&#123;</span><br><span class="line">        QString path = QFileDialog::<span class="built_in">getOpenFileName</span>(<span class="keyword">this</span>,<span class="string">&quot;打开文件&quot;</span>,<span class="string">&quot;C:\\Users\\lyzhy\\Desktop&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//将路径放入到lineEdit中</span></span><br><span class="line">        ui-&gt;lineEdit-&gt;<span class="built_in">setText</span>(path);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//读取内容放入到textEdit中</span></span><br><span class="line">        <span class="comment">//QFile默认支持的格式是 UTF-8</span></span><br><span class="line">        QFile <span class="built_in">file</span>(path);<span class="comment">//参数为读取文件的路径</span></span><br><span class="line">        <span class="comment">//设置打开方式</span></span><br><span class="line">        file.<span class="built_in">open</span>(QIODevice::ReadOnly);</span><br><span class="line"></span><br><span class="line">        QByteArray array = file.<span class="built_in">readAll</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// QByteArray array;</span></span><br><span class="line">        <span class="comment">// while(!file.atEnd())</span></span><br><span class="line">        <span class="comment">// &#123;</span></span><br><span class="line">        <span class="comment">//     array += file.readLine();//按行读</span></span><br><span class="line">        <span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//编码格式类</span></span><br><span class="line">        <span class="comment">//QString content = QString::fromLocal8Bit(array);</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//将读取到的数据放入到textEdit</span></span><br><span class="line">        ui-&gt;textEdit-&gt;<span class="built_in">setText</span>(array);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//对文件对象进行关闭</span></span><br><span class="line">        file.<span class="built_in">close</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//进行写文件</span></span><br><span class="line">        file.<span class="built_in">open</span>(QIODevice::Append);<span class="comment">//用追加的方式进行写</span></span><br><span class="line"></span><br><span class="line">        file.<span class="built_in">write</span>(<span class="string">&quot;茉莉生酪拿铁&quot;</span>);</span><br><span class="line"></span><br><span class="line">        file.<span class="built_in">close</span>();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//QFileInfo 文件信息类</span></span><br><span class="line">        QFileInfo <span class="built_in">info</span>(path);</span><br><span class="line"></span><br><span class="line">        <span class="built_in">qDebug</span>()&lt;&lt;<span class="string">&quot;文件大小：&quot;</span>&lt;&lt;info.<span class="built_in">size</span>()&lt;&lt;<span class="string">&quot;文件后缀名：&quot;</span>&lt;&lt;info.<span class="built_in">suffix</span>()</span><br><span class="line">                 &lt;&lt;<span class="string">&quot;文件名称：&quot;</span>&lt;&lt;info.<span class="built_in">fileName</span>()&lt;&lt;<span class="string">&quot;文件路径：&quot;</span>&lt;&lt;info.<span class="built_in">filePath</span>();</span><br><span class="line">        <span class="built_in">qDebug</span>()&lt;&lt;<span class="string">&quot;创建日期：&quot;</span>&lt;&lt;info.<span class="built_in">birthTime</span>().<span class="built_in">toString</span>(<span class="string">&quot;yyyy/MM/dd hh:mm:ss&quot;</span>);</span><br><span class="line">        <span class="built_in">qDebug</span>()&lt;&lt;<span class="string">&quot;最后修改日期：&quot;</span>&lt;&lt;info.<span class="built_in">lastModified</span>().<span class="built_in">toString</span>(<span class="string">&quot;yyyy-MM-dd hh:mm:ss&quot;</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Widget::~<span class="built_in">Widget</span>()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">delete</span> ui;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="翻金币游戏实战"><a href="#翻金币游戏实战" class="headerlink" title="翻金币游戏实战"></a>翻金币游戏实战</h1><p>创建项目，添加项目资源</p>
<p><strong>主场景</strong></p>
<ol>
<li><p>设置游戏主场景配置</p>
<p> 设置背景图标</p>
<p> 设置固定大小</p>
<p> 设置项目标题</p>
<p> 设置背景</p>
<p> 背景标题</p>
<p> 开始菜单</p>
<p> 退出功能</p>
</li>
<li><p>创建开始按钮</p>
<p> 封装自定义按钮 MyPushButton</p>
<p> 构造函数  参数（ 默认显示图片， 按下后显示的图片）</p>
<p> 开始按钮 点击开始按钮进入选择关卡场景</p>
<p> 开始按钮特效</p>
<p> zoom1 向下跳  </p>
<p> zoom2 向上跳</p>
</li>
<li><p>创建选择关卡场景</p>
<p> 点击开始按钮后 延时进入到 选择关卡场景</p>
</li>
</ol>
<p><strong>选择关卡场景</strong></p>
<ol>
<li><p>场景基本设置 </p>
<p>背景设置 图标 标题 大小等</p>
</li>
<li><p>创建返回按钮</p>
<p> 选择关卡的返回按钮特效制作</p>
<pre><code> 点击后切换另一个图片

 重写 void mousePressEvent

 重写 void mouseReleaseEvent
</code></pre>
</li>
<li><p>开始场景与选择关卡场景的切换</p>
<p> 点击选择关卡场景的返回按钮，发送一个自定义信号</p>
<p> 在主场景中监听这个信号，并且当触发信号后，重新显示主场景，隐藏掉选择关卡的场景</p>
</li>
<li><p>创建选择关卡按钮</p>
<p> 利用一个for循环将所有的按钮布置到场景中</p>
<p> 在按钮上面设置一个QLabel显示关卡数</p>
<p> QLabel  设置 大小、显示文字、对齐方式、鼠标穿透</p>
<p> 给每个按钮 监听点击事件</p>
</li>
</ol>
<p><strong>翻金币场景</strong></p>
<ol>
<li><p>翻金币场景创建</p>
<p> 点击选择关卡按钮后，进入到翻金币游戏场景</p>
<p> 配置翻金币游戏场景  设置标题、图标、大小、设置背景</p>
<p> 实现返回按钮，可以返回到上一个场景（选关场景）</p>
<p> 实现三个场景之间的切换</p>
</li>
<li><p>实现显示关卡标签<br> 在左下角显示玩家具体的关卡标签</p>
<p> QLabel创建设置 大小和位置label-&gt;setGeometry(30, this-&gt;height() - 50,120, 50);</p>
<p> QFont font 设置字体以及字号</p>
<p> 给QLabel设置字体  setFont（font）</p>
</li>
<li><p>创建金币类<br> 先将金币的背景图案放入到 PlayScene 中</p>
<p> 创建 MyCoin 自定义金币按钮类</p>
<p> MyCoin::MyCoin(QString btnImg) 构造函数中传入默认显示的图片金币</p>
<p> 在PlayScene创建所有的金币按钮</p>
</li>
<li><p>每个关卡的默认显示</p>
<p> 先引入dataConfig.h 和 dataConfig.cpp文件到项目中</p>
<p> 在PlayScene 中写了 int gameArray[4][4]的数组 维护每个关卡的金币状态</p>
<p> 初始化每个关卡的显示</p>
</li>
<li><p>金币翻转特效</p>
<p> 给每个硬币加属性  posX 坐标x   posY 坐标y bool flag  正反面标志</p>
<p> 给MyCoin 加函数  changFlag改变标志，<br> 如果是flag为true 改为false  并且开启定时器1  （正面翻反面）；<br> 如果flag为false ，改为true，并且开启定时器2   （反面翻正面）</p>
<p> 实现定时器中的内容</p>
<p> 测试 金币翻银币 以及 银币翻金币</p>
</li>
<li><p>解决快速点击的效果不好</p>
<p> 在MyCoin中加入了 isAnimation 判断 是否正在做动画条件</p>
<p> 当按下 MyCoin 判断是否在做动画，如果做动画，直接return，保证金币和银币动态切换的完整效果</p>
</li>
<li><p>翻转周围金币<br> 点击金币后 ，延时翻转周围金币实现</p>
</li>
<li><p>判断胜利</p>
<p> PlayScene中 添加 isWin的标志 来判断是否胜利</p>
<p> 如果胜利了，打印胜利信息</p>
<p> 将所有按钮 屏蔽掉点击</p>
</li>
<li><p>胜利图片特效</p>
<p>将胜利图片放入到游戏场景外</p>
<p>当游戏胜利时，移动到屏幕中央，做胜利效果</p>
</li>
<li><p>添加音效资源</p>
<p>QSoundEffect 所属模块  multimedia 需要在.pro文件中加入这个模块</p>
<p>在三个场景中添加音效</p>
<p>播放  s -&gt;play()</p>
<p>s-&gt;setLoop() 设置播放次数 -1代表无限循环播放</p>
</li>
<li><p>项目的优化</p>
<p>将三个场景的切换位置 一致</p>
</li>
<li><p>打包</p>
<p>hm nis edit</p>
<p>enigma</p>
</li>
</ol>
<p>完整项目链接：<a target="_blank" rel="noopener" href="https://github.com/lejunXTS/coinfilp/tree/main">https://github.com/lejunXTS/coinfilp/tree/main</a></p>
<p>完结撒花！</p>
<p>完结撒花！</p>
<p>完结撒花！</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="http://lejunxts.github.io">一颗流浪小石头</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="http://lejunxts.github.io/posts/abd0a875.html">http://lejunxts.github.io/posts/abd0a875.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://lejunxts.github.io" target="_blank">比宇宙更加遥远的地方</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E5%9F%BA%E7%A1%80/">基础</a><a class="post-meta__tags" href="/tags/QT/">QT</a></div><div class="post_share"><div class="social-share" data-image="/img/fulilian2.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/571cb353.html" title="webserver"><img class="cover" src="/img/loading.gif" data-original="/img/fulilian2.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">webserver</div></div></a></div><div class="next-post pull-right"><a href="/posts/f4c4f07f.html" title="算法——学习记录ing"><img class="cover" src="/img/loading.gif" data-original="/img/fulilian2.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">算法——学习记录ing</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/posts/c8ad3605.html" title="cpp基础"><img class="cover" src="/img/loading.gif" data-original="/img/fulilian2.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-01-12</div><div class="title">cpp基础</div></div></a></div></div></div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div><div class="comment-switch"><span class="first-comment">Gitalk</span><span id="switch-btn"></span><span class="second-comment">Disqus</span></div></div><div class="comment-wrap"><div><div id="gitalk-container"></div></div><div><div id="disqus_thread"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/loading.gif" data-original="/img/touxiang.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">一颗流浪小石头</div><div class="author-info__description">总有一天，要在那里看到星星！</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">13</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">15</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">7</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/lejunXTS"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/lejunXTS" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="https://www.bilibili.com/" target="_blank" title="bilibili"><i class="fab fa-bilibili"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">循此苦旅，以达繁星</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0"><span class="toc-number">1.</span> <span class="toc-text">概述</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AFQT"><span class="toc-number">1.1.</span> <span class="toc-text">什么是QT</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Qt%E7%9A%84%E5%8F%91%E5%B1%95%E5%8F%B2"><span class="toc-number">1.2.</span> <span class="toc-text">Qt的发展史</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%94%AF%E6%8C%81%E7%9A%84%E5%B9%B3%E5%8F%B0"><span class="toc-number">1.3.</span> <span class="toc-text">支持的平台</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Qt%E7%89%88%E6%9C%AC"><span class="toc-number">1.4.</span> <span class="toc-text">Qt版本</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#QT%E7%9A%84%E4%BC%98%E7%82%B9"><span class="toc-number">1.5.</span> <span class="toc-text">QT的优点</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%88%90%E5%8A%9F%E6%A1%88%E4%BE%8B"><span class="toc-number">1.6.</span> <span class="toc-text">成功案例</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE"><span class="toc-number">1.7.</span> <span class="toc-text">创建项目</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%88%9B%E5%BB%BAQT%E9%A1%B9%E7%9B%AE"><span class="toc-number">2.</span> <span class="toc-text">创建QT项目</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E4%B8%AAQT%E9%A1%B9%E7%9B%AE"><span class="toc-number">2.1.</span> <span class="toc-text">第一个QT项目</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8C%89%E9%92%AE%E6%8E%A7%E4%BB%B6%E7%9A%84%E5%B8%B8%E7%94%A8API"><span class="toc-number">2.2.</span> <span class="toc-text">按钮控件的常用API</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AF%B9%E8%B1%A1%E6%A0%91"><span class="toc-number">2.3.</span> <span class="toc-text">对象树</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AA%97%E5%8F%A3%E5%9D%90%E6%A0%87%E4%BD%93%E7%B3%BB"><span class="toc-number">2.4.</span> <span class="toc-text">窗口坐标体系</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BF%A1%E5%8F%B7%E5%92%8C%E6%A7%BD%E6%9C%BA%E5%88%B6"><span class="toc-number">3.</span> <span class="toc-text">信号和槽机制</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%9E%E6%8E%A5%E6%96%B9%E5%BC%8F"><span class="toc-number">3.1.</span> <span class="toc-text">连接方式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BF%A1%E5%8F%B7%E5%92%8C%E6%A7%BD"><span class="toc-number">3.2.</span> <span class="toc-text">自定义信号和槽</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B6%E4%BB%96"><span class="toc-number">3.3.</span> <span class="toc-text">其他</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">3.4.</span> <span class="toc-text">Lambda表达式</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#QMainWindow"><span class="toc-number">4.</span> <span class="toc-text">QMainWindow</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%80%E4%BB%8B"><span class="toc-number">4.1.</span> <span class="toc-text">简介</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80-%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C"><span class="toc-number">4.2.</span> <span class="toc-text">基础&amp;常用操作</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B5%84%E6%BA%90%E6%96%87%E4%BB%B6"><span class="toc-number">4.3.</span> <span class="toc-text">资源文件</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AF%B9%E8%AF%9D%E6%A1%86QDialog"><span class="toc-number">5.</span> <span class="toc-text">对话框QDialog</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%AF%B9%E8%AF%9D%E6%A1%86"><span class="toc-number">5.1.</span> <span class="toc-text">自定义对话框</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A0%87%E5%87%86%E5%AF%B9%E8%AF%9D%E6%A1%86"><span class="toc-number">5.2.</span> <span class="toc-text">标准对话框</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%95%8C%E9%9D%A2%E5%B8%83%E5%B1%80"><span class="toc-number">6.</span> <span class="toc-text">界面布局</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E7%99%BB%E5%BD%95%E7%AA%97%E5%8F%A3"><span class="toc-number">6.1.</span> <span class="toc-text">实现登录窗口</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E6%8E%A7%E4%BB%B6"><span class="toc-number">7.</span> <span class="toc-text">常用控件</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8C%89%E9%92%AE%E7%BB%84"><span class="toc-number">7.1.</span> <span class="toc-text">按钮组</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#QListWidgetItem-%E5%88%97%E8%A1%A8%E5%AE%B9%E5%99%A8"><span class="toc-number">7.2.</span> <span class="toc-text">QListWidgetItem 列表容器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#QTreeWidget-%E6%A0%91%E6%8E%A7%E4%BB%B6"><span class="toc-number">7.3.</span> <span class="toc-text">QTreeWidget 树控件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#QTableWidget-%E8%A1%A8%E6%A0%BC%E6%8E%A7%E4%BB%B6"><span class="toc-number">7.4.</span> <span class="toc-text">QTableWidget 表格控件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B6%E4%BB%96%E6%8E%A7%E4%BB%B6"><span class="toc-number">7.5.</span> <span class="toc-text">其他控件</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8E%A7%E4%BB%B6%E5%B0%81%E8%A3%85"><span class="toc-number">8.</span> <span class="toc-text">自定义控件封装</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Qt-%E4%B8%AD%E7%9A%84%E4%BA%8B%E4%BB%B6"><span class="toc-number">9.</span> <span class="toc-text">Qt 中的事件</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9A%E6%97%B6%E5%99%A8"><span class="toc-number">9.1.</span> <span class="toc-text">定时器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E7%A7%8D%E5%AE%9A%E6%97%B6%E5%99%A8"><span class="toc-number">9.1.1.</span> <span class="toc-text">第一种定时器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E7%A7%8D%E5%AE%9A%E6%97%B6%E5%99%A8"><span class="toc-number">9.1.2.</span> <span class="toc-text">第二种定时器</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#event-%E4%BA%8B%E4%BB%B6"><span class="toc-number">9.2.</span> <span class="toc-text">event 事件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6%E8%BF%87%E6%BB%A4%E5%99%A8"><span class="toc-number">9.3.</span> <span class="toc-text">事件过滤器</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#QPainter-%E7%BB%98%E5%9B%BE"><span class="toc-number">10.</span> <span class="toc-text">QPainter 绘图</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80%E8%AE%BE%E7%BD%AE"><span class="toc-number">10.1.</span> <span class="toc-text">基础设置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%AB%98%E7%BA%A7%E8%AE%BE%E7%BD%AE"><span class="toc-number">10.2.</span> <span class="toc-text">高级设置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%98%E5%9B%BE%E8%AE%BE%E5%A4%87"><span class="toc-number">10.3.</span> <span class="toc-text">绘图设备</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F"><span class="toc-number">11.</span> <span class="toc-text">文件系统</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%BF%BB%E9%87%91%E5%B8%81%E6%B8%B8%E6%88%8F%E5%AE%9E%E6%88%98"><span class="toc-number">12.</span> <span class="toc-text">翻金币游戏实战</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/308b9800.html" title="pytorch一键导出环境"><img src="/img/loading.gif" data-original="/img/fulilian2.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="pytorch一键导出环境"/></a><div class="content"><a class="title" href="/posts/308b9800.html" title="pytorch一键导出环境">pytorch一键导出环境</a><time datetime="2024-05-16T14:19:54.000Z" title="发表于 2024-05-16 22:19:54">2024-05-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/7f1ae6d2.html" title="java"><img src="/img/loading.gif" data-original="/img/fulilian2.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="java"/></a><div class="content"><a class="title" href="/posts/7f1ae6d2.html" title="java">java</a><time datetime="2024-04-29T01:51:22.000Z" title="发表于 2024-04-29 09:51:22">2024-04-29</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/2e3accd9.html" title="协程库"><img src="/img/loading.gif" data-original="/img/fulilian2.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="协程库"/></a><div class="content"><a class="title" href="/posts/2e3accd9.html" title="协程库">协程库</a><time datetime="2024-02-29T05:16:39.000Z" title="发表于 2024-02-29 13:16:39">2024-02-29</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/b7339d63.html" title="Git"><img src="/img/loading.gif" data-original="/img/fulilian2.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Git"/></a><div class="content"><a class="title" href="/posts/b7339d63.html" title="Git">Git</a><time datetime="2024-02-29T05:16:34.000Z" title="发表于 2024-02-29 13:16:34">2024-02-29</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/ce15e2e9.html" title="基于QT的桌面网盘系统"><img src="/img/loading.gif" data-original="/img/fulilian2.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="基于QT的桌面网盘系统"/></a><div class="content"><a class="title" href="/posts/ce15e2e9.html" title="基于QT的桌面网盘系统">基于QT的桌面网盘系统</a><time datetime="2024-02-29T05:16:25.000Z" title="发表于 2024-02-29 13:16:25">2024-02-29</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2024 By 一颗流浪小石头</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="chat-btn" type="button" title="聊天"><i class="fas fa-sms"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.12.0"></script><script src="/js/main.js?v=4.12.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.32/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"><script>(() => {
  const initGitalk = () => {
    const gitalk = new Gitalk(Object.assign({
      clientID: 'bbc2c3798eb9cb61d3f7',
      clientSecret: '1402bd76f69651da66d30a5626e8898df2f41840',
      repo: 'blogchat',
      owner: 'lejunXTS',
      admin: ['lejunXTS'],
      id: '146f509741180f095f135632fc5aed4b',
      updateCountCallback: commentCount
    },null))

    gitalk.render('gitalk-container')
  }

  const loadGitalk = async() => {
    if (typeof Gitalk === 'function') initGitalk()
    else {
      await getCSS('https://cdn.jsdelivr.net/npm/gitalk@1.8.0/dist/gitalk.min.css')
      await getScript('https://cdn.jsdelivr.net/npm/gitalk@1.8.0/dist/gitalk.min.js')
      initGitalk()
    }
  }
  
  const commentCount = n => {
    const isCommentCount = document.querySelector('#post-meta .gitalk-comment-count')
    if (isCommentCount) {
      isCommentCount.textContent= n
    }
  }

  if ('Gitalk' === 'Gitalk' || !false) {
    if (false) btf.loadComment(document.getElementById('gitalk-container'), loadGitalk)
    else loadGitalk()
  } else {
    window.loadOtherComment = loadGitalk
  }
})()</script><script>(() => {
  const disqus_config = function () {
    this.page.url = 'http://lejunxts.github.io/posts/abd0a875.html'
    this.page.identifier = '/posts/abd0a875.html'
    this.page.title = 'QT——学习'
  }

  const disqusReset = () => {
    window.DISQUS && window.DISQUS.reset({
      reload: true,
      config: disqus_config
    })
  }

  btf.addGlobalFn('themeChange', disqusReset, 'disqus')

  const loadDisqus = () =>{
    if (window.DISQUS) disqusReset()
    else {
      const script = document.createElement('script')
      script.src = 'https://.disqus.com/embed.js'
      script.setAttribute('data-timestamp', +new Date())
      document.head.appendChild(script)
    }
  }

  const getCount = async() => {
    try {
      const eleGroup = document.querySelector('#post-meta .disqus-comment-count')
      if (!eleGroup) return
      const cleanedLinks = eleGroup.href.replace(/#post-comment$/, '')

      const res = await fetch(`https://disqus.com/api/3.0/threads/set.json?forum=&api_key=&thread:link=${cleanedLinks}`,{
        method: 'GET'
      })
      const result = await res.json()

      const count = result.response.length ? result.response[0].posts : 0
      eleGroup.textContent = count
    } catch (err) {
      console.error(err)
    }
  }

  if ('Gitalk' === 'Disqus' || !false) {
    if (false) btf.loadComment(document.getElementById('disqus_thread'), loadDisqus)
    else {
      loadDisqus()
      
    }
  } else {
    window.loadOtherComment = loadDisqus
  }
})()</script></div><script defer src="/live2d-widget/autoload.js"></script><div class="aplayer no-destroy" data-id="9153643510" data-server="netease" data-type="playlist" data-fixed="true" data-autoplay="true"> </div><canvas class="fireworks" mobile="true"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/fireworks.min.js"></script><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="true" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = true;
document.body.addEventListener('input', POWERMODE);
</script><script src="//code.tidio.co/ixstqbnhtqy0gjgbdc3hgjyihpwo8ufh.js" async="async"></script><script>(() => {
  const isChatBtn = true
  const isChatHideShow = false

  if (isChatBtn) {
    let isShow = false
    const close = () => {
      window.tidioChatApi.hide()
      isShow = false
    }
    
    const open = () => {
      window.tidioChatApi.open()
      window.tidioChatApi.show()
      isShow = true
    }

    const onTidioChatApiReady = () => {
      window.tidioChatApi.hide()
      window.tidioChatApi.on("close", close)
    }
    if (window.tidioChatApi) {
      window.tidioChatApi.on("ready", onTidioChatApiReady)
    } else {
      document.addEventListener("tidioChat-ready", onTidioChatApiReady)
    }

    window.chatBtnFn = () => {
      if (!window.tidioChatApi) return
      isShow ? close() : open()
    }
  } else if (isChatHideShow) {
    window.chatBtn = {
      hide: () => {
        window.tidioChatApi && window.tidioChatApi.hide()
      },
      show: () => {
        window.tidioChatApi && window.tidioChatApi.show()
      }
    }
  }
})()</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/metingjs/dist/Meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener
  btf.removeGlobalFnEvent('pjax')
  btf.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js?v=4.12.0"></script></div></div>
        <style>
            [bg-lazy] {
                background-image: none !important;
                background-color: #eee !important;
            }
        </style>
        <script>
            window.imageLazyLoadSetting = {
                isSPA: true,
                preloadRatio: 3,
                processImages: null,
            };
        </script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(e.href.match(t)||e.href.match(r))&&(e.href=a.dataset.original)})});</script><script>!function(r){r.imageLazyLoadSetting.processImages=t;var e=r.imageLazyLoadSetting.isSPA,n=r.imageLazyLoadSetting.preloadRatio||1,c=a();function a(){var t=Array.prototype.slice.call(document.querySelectorAll("img[data-original]")),e=Array.prototype.slice.call(document.querySelectorAll("[bg-lazy]"));return t.concat(e)}function t(){e&&(c=a());for(var t,o=0;o<c.length;o++)0<=(t=(t=c[o]).getBoundingClientRect()).bottom&&0<=t.left&&t.top<=(r.innerHeight*n||document.documentElement.clientHeight*n)&&function(){var t,e,n,a,i=c[o];e=function(){c=c.filter(function(t){return i!==t}),r.imageLazyLoadSetting.onImageLoaded&&r.imageLazyLoadSetting.onImageLoaded(i)},(t=i).hasAttribute("bg-lazy")?(t.removeAttribute("bg-lazy"),e&&e()):(n=new Image,a=t.getAttribute("data-original"),n.onload=function(){t.src=a,t.removeAttribute("data-original"),e&&e()},t.src!==a&&(n.src=a))}()}function i(){clearTimeout(t.tId),t.tId=setTimeout(t,500)}t(),document.addEventListener("scroll",i),r.addEventListener("resize",i),r.addEventListener("orientationchange",i)}(this);</script></body></html>